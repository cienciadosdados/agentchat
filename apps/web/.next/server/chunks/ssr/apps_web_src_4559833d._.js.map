{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///C:/app/agentset/apps/web/src/lib/auth-client.ts"],"sourcesContent":["import {\r\n  adminClient,\r\n  inferAdditionalFields,\r\n  magicLinkClient,\r\n  organizationClient,\r\n} from \"better-auth/client/plugins\";\r\nimport { createAuthClient } from \"better-auth/react\";\r\n\r\nimport type { auth } from \"./auth\";\r\nimport { getBaseUrl } from \"./utils\";\r\n\r\nexport const authClient = createAuthClient({\r\n  baseURL: getBaseUrl(),\r\n  plugins: [\r\n    inferAdditionalFields<typeof auth>(),\r\n    adminClient(),\r\n    organizationClient(),\r\n    magicLinkClient(),\r\n  ],\r\n});\r\n"],"names":[],"mappings":";;;AAAA;AAAA;AAMA;AAGA;;;;AAEO,MAAM,aAAa,CAAA,GAAA,mKAAA,CAAA,mBAAgB,AAAD,EAAE;IACzC,SAAS,CAAA,GAAA,kIAAA,CAAA,aAAU,AAAD;IAClB,SAAS;QACP,CAAA,GAAA,qLAAA,CAAA,wBAAqB,AAAD;QACpB,CAAA,GAAA,qLAAA,CAAA,cAAW,AAAD;QACV,CAAA,GAAA,qLAAA,CAAA,qBAAkB,AAAD;QACjB,CAAA,GAAA,qLAAA,CAAA,kBAAe,AAAD;KACf;AACH","debugId":null}},
    {"offset": {"line": 32, "column": 0}, "map": {"version":3,"sources":["file:///C:/app/agentset/apps/web/src/hooks/use-session.ts"],"sourcesContent":["import { authClient } from \"@/lib/auth-client\";\r\nimport { useQuery } from \"@tanstack/react-query\";\r\n\r\nexport function useSession() {\r\n  const {\r\n    data: session,\r\n    refetch,\r\n    isLoading,\r\n  } = useQuery({\r\n    queryKey: [\"session\"],\r\n    queryFn: () => authClient.getSession().then((res) => res.data),\r\n    refetchOnMount: false,\r\n    refetchOnWindowFocus: false,\r\n    staleTime: Infinity,\r\n  });\r\n\r\n  const isAdmin = session?.user.role === \"admin\";\r\n\r\n  return {\r\n    session,\r\n    refetch,\r\n    isLoading,\r\n    isAdmin,\r\n  };\r\n}\r\n"],"names":[],"mappings":";;;AAAA;AACA;;;AAEO,SAAS;IACd,MAAM,EACJ,MAAM,OAAO,EACb,OAAO,EACP,SAAS,EACV,GAAG,CAAA,GAAA,2KAAA,CAAA,WAAQ,AAAD,EAAE;QACX,UAAU;YAAC;SAAU;QACrB,SAAS,IAAM,2IAAA,CAAA,aAAU,CAAC,UAAU,GAAG,IAAI,CAAC,CAAC,MAAQ,IAAI,IAAI;QAC7D,gBAAgB;QAChB,sBAAsB;QACtB,WAAW;IACb;IAEA,MAAM,UAAU,SAAS,KAAK,SAAS;IAEvC,OAAO;QACL;QACA;QACA;QACA;IACF;AACF","debugId":null}},
    {"offset": {"line": 63, "column": 0}, "map": {"version":3,"sources":["file:///C:/app/agentset/apps/web/src/app/app.agentset.ai/%28dashboard%29/profile/active-sessions.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport type { Session } from \"@/lib/auth-types\";\r\nimport { useMemo } from \"react\";\r\nimport { useSession } from \"@/hooks/use-session\";\r\nimport { authClient } from \"@/lib/auth-client\";\r\nimport { useRouter } from \"@bprogress/next/app\";\r\nimport { useMutation } from \"@tanstack/react-query\";\r\nimport { LaptopIcon, SmartphoneIcon } from \"lucide-react\";\r\nimport { toast } from \"sonner\";\r\nimport { UAParser } from \"ua-parser-js\";\r\n\r\nimport { Button } from \"@agentset/ui\";\r\n\r\nconst SessionItem = ({ session }: { session: Session[\"session\"] }) => {\r\n  const { session: activeSession } = useSession();\r\n  const router = useRouter();\r\n\r\n  const parsedAgent = useMemo(\r\n    () => new UAParser(session.userAgent || \"\"),\r\n    [session.userAgent],\r\n  );\r\n  const isCurrentSession = session.id === activeSession?.session.id;\r\n\r\n  const { mutateAsync: terminateSession, isPending: isTerminating } =\r\n    useMutation({\r\n      mutationFn: async () => {\r\n        const res = await authClient.revokeSession({\r\n          token: session.token,\r\n        });\r\n\r\n        if (res.error) {\r\n          throw new Error(res.error.message);\r\n        }\r\n\r\n        return res.data;\r\n      },\r\n      onSuccess: () => {\r\n        toast.success(\"Session terminated successfully\");\r\n        router.refresh();\r\n      },\r\n      onError: (error) => {\r\n        toast.error(error.message);\r\n      },\r\n    });\r\n\r\n  return (\r\n    <div key={session.id}>\r\n      <div className=\"flex items-center justify-between gap-2 font-medium text-black dark:text-white\">\r\n        <p className=\"flex items-center gap-2\">\r\n          {parsedAgent.getDevice().type === \"mobile\" ? (\r\n            <SmartphoneIcon className=\"h-4 w-4\" />\r\n          ) : (\r\n            <LaptopIcon className=\"h-4 w-4\" />\r\n          )}\r\n          {parsedAgent.getOS().name}, {parsedAgent.getBrowser().name}{\" \"}\r\n          {isCurrentSession && <span>(Current)</span>}\r\n        </p>\r\n\r\n        <Button\r\n          variant=\"destructive\"\r\n          size=\"sm\"\r\n          isLoading={isTerminating}\r\n          onClick={() => terminateSession()}\r\n        >\r\n          {isCurrentSession ? \"Sign Out\" : \"Terminate\"}\r\n        </Button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default function ActiveSessions({\r\n  activeSessions,\r\n}: {\r\n  activeSessions: Session[\"session\"][];\r\n}) {\r\n  return (\r\n    <div className=\"mt-20 flex max-w-xl flex-col gap-5\">\r\n      <p className=\"text-lg font-medium\">Active Sessions</p>\r\n      <ul className=\"flex flex-col gap-2\">\r\n        {activeSessions\r\n          .filter((session) => session.userAgent)\r\n          .map((session) => {\r\n            return <SessionItem key={session.id} session={session} />;\r\n          })}\r\n      </ul>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AAGA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAEA;AAAA;AAZA;;;;;;;;;;;AAcA,MAAM,cAAc,CAAC,EAAE,OAAO,EAAmC;IAC/D,MAAM,EAAE,SAAS,aAAa,EAAE,GAAG,CAAA,GAAA,6IAAA,CAAA,aAAU,AAAD;IAC5C,MAAM,SAAS,CAAA,GAAA,kJAAA,CAAA,YAAS,AAAD;IAEvB,MAAM,cAAc,CAAA,GAAA,qMAAA,CAAA,UAAO,AAAD,EACxB,IAAM,IAAI,kKAAA,CAAA,WAAQ,CAAC,QAAQ,SAAS,IAAI,KACxC;QAAC,QAAQ,SAAS;KAAC;IAErB,MAAM,mBAAmB,QAAQ,EAAE,KAAK,eAAe,QAAQ;IAE/D,MAAM,EAAE,aAAa,gBAAgB,EAAE,WAAW,aAAa,EAAE,GAC/D,CAAA,GAAA,8KAAA,CAAA,cAAW,AAAD,EAAE;QACV,YAAY;YACV,MAAM,MAAM,MAAM,2IAAA,CAAA,aAAU,CAAC,aAAa,CAAC;gBACzC,OAAO,QAAQ,KAAK;YACtB;YAEA,IAAI,IAAI,KAAK,EAAE;gBACb,MAAM,IAAI,MAAM,IAAI,KAAK,CAAC,OAAO;YACnC;YAEA,OAAO,IAAI,IAAI;QACjB;QACA,WAAW;YACT,wIAAA,CAAA,QAAK,CAAC,OAAO,CAAC;YACd,OAAO,OAAO;QAChB;QACA,SAAS,CAAC;YACR,wIAAA,CAAA,QAAK,CAAC,KAAK,CAAC,MAAM,OAAO;QAC3B;IACF;IAEF,qBACE,8OAAC;kBACC,cAAA,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBAAE,WAAU;;wBACV,YAAY,SAAS,GAAG,IAAI,KAAK,yBAChC,8OAAC,kNAAA,CAAA,iBAAc;4BAAC,WAAU;;;;;iDAE1B,8OAAC,0MAAA,CAAA,aAAU;4BAAC,WAAU;;;;;;wBAEvB,YAAY,KAAK,GAAG,IAAI;wBAAC;wBAAG,YAAY,UAAU,GAAG,IAAI;wBAAE;wBAC3D,kCAAoB,8OAAC;sCAAK;;;;;;;;;;;;8BAG7B,8OAAC,8IAAA,CAAA,SAAM;oBACL,SAAQ;oBACR,MAAK;oBACL,WAAW;oBACX,SAAS,IAAM;8BAEd,mBAAmB,aAAa;;;;;;;;;;;;OAlB7B,QAAQ,EAAE;;;;;AAuBxB;AAEe,SAAS,eAAe,EACrC,cAAc,EAGf;IACC,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAE,WAAU;0BAAsB;;;;;;0BACnC,8OAAC;gBAAG,WAAU;0BACX,eACE,MAAM,CAAC,CAAC,UAAY,QAAQ,SAAS,EACrC,GAAG,CAAC,CAAC;oBACJ,qBAAO,8OAAC;wBAA6B,SAAS;uBAArB,QAAQ,EAAE;;;;;gBACrC;;;;;;;;;;;;AAIV","debugId":null}},
    {"offset": {"line": 215, "column": 0}, "map": {"version":3,"sources":["file:///C:/app/agentset/apps/web/src/app/app.agentset.ai/%28dashboard%29/profile/edit-user.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport type { Session } from \"@/lib/auth-types\";\r\nimport { useState } from \"react\";\r\nimport { useSession } from \"@/hooks/use-session\";\r\nimport { authClient } from \"@/lib/auth-client\";\r\nimport { useRouter } from \"@bprogress/next/app\";\r\nimport { Loader2Icon, XIcon } from \"lucide-react\";\r\nimport { toast } from \"sonner\";\r\n\r\nimport {\r\n  Alert,\r\n  AlertDescription,\r\n  AlertTitle,\r\n  Button,\r\n  Input,\r\n  Label,\r\n} from \"@agentset/ui\";\r\n\r\nasync function convertImageToBase64(file: File): Promise<string> {\r\n  return new Promise((resolve, reject) => {\r\n    const reader = new FileReader();\r\n    reader.onloadend = () => resolve(reader.result as string);\r\n    reader.onerror = reject;\r\n    reader.readAsDataURL(file);\r\n  });\r\n}\r\n\r\nexport default function EditUser() {\r\n  const { session, isLoading } = useSession();\r\n  if (isLoading || !session) return <div>Loading...</div>;\r\n\r\n  return <EditUserForm session={session} />;\r\n}\r\n\r\nconst EditUserForm = ({ session }: { session: Session }) => {\r\n  const [name, setName] = useState<string>(session.user.name);\r\n  const [image, setImage] = useState<File | null>(null);\r\n  const [imagePreview, setImagePreview] = useState<string | null>(\r\n    session.user.image || null,\r\n  );\r\n  const [isLoading, setIsLoading] = useState<boolean>(false);\r\n  const [emailVerificationPending, setEmailVerificationPending] =\r\n    useState<boolean>(false);\r\n  const router = useRouter();\r\n\r\n  const handleImageChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const file = e.target.files?.[0];\r\n    if (file) {\r\n      setImage(file);\r\n      const reader = new FileReader();\r\n      reader.onloadend = () => {\r\n        setImagePreview(reader.result as string);\r\n      };\r\n      reader.readAsDataURL(file);\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async (e: React.FormEvent<HTMLFormElement>) => {\r\n    e.preventDefault();\r\n\r\n    setIsLoading(true);\r\n    await authClient.updateUser({\r\n      image: image ? await convertImageToBase64(image) : undefined,\r\n      name: name ? name : undefined,\r\n      fetchOptions: {\r\n        onSuccess: () => {\r\n          toast.success(\"User updated successfully\");\r\n        },\r\n        onError: (error) => {\r\n          toast.error(error.error.message);\r\n        },\r\n      },\r\n    });\r\n\r\n    router.refresh();\r\n    setIsLoading(false);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      {session.user.emailVerified ? null : (\r\n        <Alert className=\"mb-10\">\r\n          <AlertTitle>Verify Your Email Address</AlertTitle>\r\n          <AlertDescription className=\"text-muted-foreground\">\r\n            Please verify your email address. Check your inbox for the\r\n            verification email. If you haven't received the email, click the\r\n            button below to resend.\r\n          </AlertDescription>\r\n          <Button\r\n            size=\"sm\"\r\n            variant=\"secondary\"\r\n            className=\"mt-2\"\r\n            onClick={async () => {\r\n              await authClient.sendVerificationEmail(\r\n                {\r\n                  email: session.user.email,\r\n                },\r\n                {\r\n                  onRequest() {\r\n                    setEmailVerificationPending(true);\r\n                  },\r\n                  onError(context) {\r\n                    toast.error(context.error.message);\r\n                    setEmailVerificationPending(false);\r\n                  },\r\n                  onSuccess() {\r\n                    toast.success(\"Verification email sent successfully\");\r\n                    setEmailVerificationPending(false);\r\n                  },\r\n                },\r\n              );\r\n            }}\r\n          >\r\n            {emailVerificationPending ? (\r\n              <Loader2Icon size={15} className=\"animate-spin\" />\r\n            ) : (\r\n              \"Resend Verification Email\"\r\n            )}\r\n          </Button>\r\n        </Alert>\r\n      )}\r\n\r\n      <form onSubmit={handleSubmit} className=\"flex max-w-xl flex-col gap-10\">\r\n        <div className=\"flex flex-col gap-2\">\r\n          <Label htmlFor=\"name\">Full Name</Label>\r\n          <Input\r\n            id=\"name\"\r\n            type=\"name\"\r\n            placeholder=\"Enter your full name\"\r\n            value={name}\r\n            required\r\n            onChange={(e) => setName(e.target.value)}\r\n          />\r\n        </div>\r\n\r\n        <div className=\"flex flex-col gap-2\">\r\n          <Label htmlFor=\"email\">Email</Label>\r\n          <Input id=\"email\" type=\"email\" value={session.user.email} disabled />\r\n        </div>\r\n\r\n        <div className=\"flex flex-col gap-2\">\r\n          <Label htmlFor=\"image\">Profile Image</Label>\r\n          <div className=\"flex items-end gap-4\">\r\n            {imagePreview && (\r\n              <div className=\"relative h-16 w-16 flex-shrink-0 overflow-hidden rounded-sm\">\r\n                <img\r\n                  src={imagePreview}\r\n                  alt=\"Profile preview\"\r\n                  className=\"h-full w-full object-cover\"\r\n                />\r\n              </div>\r\n            )}\r\n\r\n            <div className=\"flex w-full items-center gap-2\">\r\n              <Input\r\n                id=\"image\"\r\n                type=\"file\"\r\n                accept=\"image/*\"\r\n                onChange={handleImageChange}\r\n                value={image ? image.name : \"\"}\r\n                className=\"text-muted-foreground w-full\"\r\n              />\r\n\r\n              {imagePreview && (\r\n                <XIcon\r\n                  className=\"cursor-pointer\"\r\n                  onClick={() => {\r\n                    setImage(null);\r\n                    setImagePreview(null);\r\n                  }}\r\n                />\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div>\r\n          <Button type=\"submit\" isLoading={isLoading}>\r\n            Update\r\n          </Button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n"],"names":[],"mappings":"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","debugId":null}}]
}