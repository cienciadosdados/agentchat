{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///C:/app/agentset/apps/web/src/hooks/use-session.ts"],"sourcesContent":["import { authClient } from \"@/lib/auth-client\";\r\nimport { useQuery } from \"@tanstack/react-query\";\r\n\r\nexport function useSession() {\r\n  const {\r\n    data: session,\r\n    refetch,\r\n    isLoading,\r\n  } = useQuery({\r\n    queryKey: [\"session\"],\r\n    queryFn: () => authClient.getSession().then((res) => res.data),\r\n    refetchOnMount: false,\r\n    refetchOnWindowFocus: false,\r\n    staleTime: Infinity,\r\n  });\r\n\r\n  const isAdmin = session?.user.role === \"admin\";\r\n\r\n  return {\r\n    session,\r\n    refetch,\r\n    isLoading,\r\n    isAdmin,\r\n  };\r\n}\r\n"],"names":[],"mappings":";;;AAAA;AACA;;;AAEO,SAAS;IACd,MAAM,EACJ,MAAM,OAAO,EACb,OAAO,EACP,SAAS,EACV,GAAG,CAAA,GAAA,2KAAA,CAAA,WAAQ,AAAD,EAAE;QACX,UAAU;YAAC;SAAU;QACrB,SAAS,IAAM,2IAAA,CAAA,aAAU,CAAC,UAAU,GAAG,IAAI,CAAC,CAAC,MAAQ,IAAI,IAAI;QAC7D,gBAAgB;QAChB,sBAAsB;QACtB,WAAW;IACb;IAEA,MAAM,UAAU,SAAS,KAAK,SAAS;IAEvC,OAAO;QACL;QACA;QACA;QACA;IACF;AACF","debugId":null}},
    {"offset": {"line": 38, "column": 0}, "map": {"version":3,"sources":["file:///C:/app/agentset/apps/web/src/components/app-sidebar/nav-user.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport Link from \"next/link\";\r\nimport { useSession } from \"@/hooks/use-session\";\r\nimport { authClient } from \"@/lib/auth-client\";\r\nimport { useRouter } from \"@bprogress/next/app\";\r\nimport { BadgeCheckIcon, LogOutIcon } from \"lucide-react\";\r\n\r\nimport {\r\n  DropdownMenu,\r\n  DropdownMenuContent,\r\n  DropdownMenuItem,\r\n  DropdownMenuLabel,\r\n  DropdownMenuSeparator,\r\n  DropdownMenuTrigger,\r\n  EntityAvatar,\r\n  Skeleton,\r\n} from \"@agentset/ui\";\r\n\r\nexport function NavUser() {\r\n  const { session, isLoading } = useSession();\r\n\r\n  const router = useRouter();\r\n  const [isSigningOut, setIsSigningOut] = useState(false);\r\n\r\n  const handleSignOut = async () => {\r\n    setIsSigningOut(true);\r\n    await authClient.signOut({\r\n      fetchOptions: {\r\n        onSuccess() {\r\n          router.replace(\"/\");\r\n        },\r\n      },\r\n    });\r\n    setIsSigningOut(false);\r\n  };\r\n\r\n  if (isLoading || !session)\r\n    return (\r\n      <Skeleton className=\"size-8 rounded-full border-2 border-transparent\" />\r\n    );\r\n\r\n  const { user } = session;\r\n\r\n  return (\r\n    <DropdownMenu>\r\n      <DropdownMenuTrigger asChild>\r\n        <button className=\"border-border overflow-hidden rounded-full border-2 data-[state=open]:border-black\">\r\n          <EntityAvatar\r\n            entity={user}\r\n            fallbackClassName=\"bg-muted text-foreground \"\r\n          />\r\n        </button>\r\n      </DropdownMenuTrigger>\r\n\r\n      <DropdownMenuContent\r\n        className=\"w-[--radix-dropdown-menu-trigger-width] min-w-56 rounded-lg\"\r\n        side=\"bottom\"\r\n        align=\"end\"\r\n        sideOffset={4}\r\n      >\r\n        <DropdownMenuLabel className=\"p-0 font-normal\">\r\n          <div className=\"flex items-center gap-2 px-1 py-1.5 text-left text-sm\">\r\n            <EntityAvatar\r\n              entity={user}\r\n              fallbackClassName=\"bg-muted text-foreground\"\r\n            />\r\n            <div className=\"grid flex-1 text-left text-sm leading-tight\">\r\n              {user.name ? (\r\n                <>\r\n                  <span className=\"truncate font-semibold\">{user.name}</span>\r\n                  <span className=\"truncate text-xs\">{user.email}</span>\r\n                </>\r\n              ) : (\r\n                <span className=\"truncate font-semibold\">{user.email}</span>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </DropdownMenuLabel>\r\n\r\n        <DropdownMenuSeparator />\r\n\r\n        <DropdownMenuItem asChild>\r\n          <Link href=\"/profile\">\r\n            <BadgeCheckIcon />\r\n            Account\r\n          </Link>\r\n        </DropdownMenuItem>\r\n\r\n        <DropdownMenuItem onClick={handleSignOut} disabled={isSigningOut}>\r\n          <LogOutIcon />\r\n          Log out\r\n        </DropdownMenuItem>\r\n      </DropdownMenuContent>\r\n    </DropdownMenu>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA;AACA;AACA;AAAA;AAEA;AAAA;AAAA;AAAA;AATA;;;;;;;;;AAoBO,SAAS;IACd,MAAM,EAAE,OAAO,EAAE,SAAS,EAAE,GAAG,CAAA,GAAA,6IAAA,CAAA,aAAU,AAAD;IAExC,MAAM,SAAS,CAAA,GAAA,kJAAA,CAAA,YAAS,AAAD;IACvB,MAAM,CAAC,cAAc,gBAAgB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAEjD,MAAM,gBAAgB;QACpB,gBAAgB;QAChB,MAAM,2IAAA,CAAA,aAAU,CAAC,OAAO,CAAC;YACvB,cAAc;gBACZ;oBACE,OAAO,OAAO,CAAC;gBACjB;YACF;QACF;QACA,gBAAgB;IAClB;IAEA,IAAI,aAAa,CAAC,SAChB,qBACE,8OAAC,gJAAA,CAAA,WAAQ;QAAC,WAAU;;;;;;IAGxB,MAAM,EAAE,IAAI,EAAE,GAAG;IAEjB,qBACE,8OAAC,wJAAA,CAAA,eAAY;;0BACX,8OAAC,wJAAA,CAAA,sBAAmB;gBAAC,OAAO;0BAC1B,cAAA,8OAAC;oBAAO,WAAU;8BAChB,cAAA,8OAAC,8IAAA,CAAA,eAAY;wBACX,QAAQ;wBACR,mBAAkB;;;;;;;;;;;;;;;;0BAKxB,8OAAC,wJAAA,CAAA,sBAAmB;gBAClB,WAAU;gBACV,MAAK;gBACL,OAAM;gBACN,YAAY;;kCAEZ,8OAAC,wJAAA,CAAA,oBAAiB;wBAAC,WAAU;kCAC3B,cAAA,8OAAC;4BAAI,WAAU;;8CACb,8OAAC,8IAAA,CAAA,eAAY;oCACX,QAAQ;oCACR,mBAAkB;;;;;;8CAEpB,8OAAC;oCAAI,WAAU;8CACZ,KAAK,IAAI,iBACR;;0DACE,8OAAC;gDAAK,WAAU;0DAA0B,KAAK,IAAI;;;;;;0DACnD,8OAAC;gDAAK,WAAU;0DAAoB,KAAK,KAAK;;;;;;;qEAGhD,8OAAC;wCAAK,WAAU;kDAA0B,KAAK,KAAK;;;;;;;;;;;;;;;;;;;;;;kCAM5D,8OAAC,wJAAA,CAAA,wBAAqB;;;;;kCAEtB,8OAAC,wJAAA,CAAA,mBAAgB;wBAAC,OAAO;kCACvB,cAAA,8OAAC,4JAAA,CAAA,UAAI;4BAAC,MAAK;;8CACT,8OAAC,sNAAA,CAAA,iBAAc;;;;;gCAAG;;;;;;;;;;;;kCAKtB,8OAAC,wJAAA,CAAA,mBAAgB;wBAAC,SAAS;wBAAe,UAAU;;0CAClD,8OAAC,8MAAA,CAAA,aAAU;;;;;4BAAG;;;;;;;;;;;;;;;;;;;AAMxB","debugId":null}},
    {"offset": {"line": 235, "column": 0}, "map": {"version":3,"sources":["file:///C:/app/agentset/apps/web/src/components/create-namespace/details-step.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useMemo } from \"react\";\r\nimport { useOrganization } from \"@/contexts/organization-context\";\r\nimport { toSlug } from \"@/lib/slug\";\r\nimport { trpcClient } from \"@/trpc/react\";\r\nimport { zodResolver } from \"@hookform/resolvers/zod\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { z } from \"zod\";\r\n\r\nimport {\r\n  Button,\r\n  DialogFooter,\r\n  Form,\r\n  FormControl,\r\n  FormField,\r\n  FormItem,\r\n  FormLabel,\r\n  FormMessage,\r\n  Input,\r\n} from \"@agentset/ui\";\r\n\r\nconst createFormSchema = (orgId: string) =>\r\n  z.object({\r\n    name: z.string().min(1),\r\n    slug: z\r\n      .string()\r\n      .min(1)\r\n      .trim()\r\n      .regex(/^[a-z0-9]+(?:-[a-z0-9]+)*$/)\r\n      .refine(\r\n        async (value) => {\r\n          if (value === \"\") return false;\r\n          const result = await trpcClient.namespace.checkSlug.query({\r\n            slug: value,\r\n            orgId,\r\n          });\r\n          return !result;\r\n        },\r\n        { message: \"Slug is already taken\" },\r\n      ),\r\n  });\r\ntype FormSchema = z.infer<ReturnType<typeof createFormSchema>>;\r\n\r\nexport default function CreateNamespaceDetailsStep({\r\n  onSubmit,\r\n  defaultValues,\r\n}: {\r\n  onSubmit: (values: FormSchema) => void;\r\n  defaultValues: Partial<FormSchema>;\r\n}) {\r\n  const { activeOrganization } = useOrganization();\r\n  const formSchema = useMemo(\r\n    () => createFormSchema(activeOrganization.id),\r\n    [activeOrganization.id],\r\n  );\r\n\r\n  const form = useForm<FormSchema>({\r\n    resolver: zodResolver(formSchema, undefined, { mode: \"async\" }),\r\n    reValidateMode: \"onBlur\",\r\n    defaultValues: defaultValues,\r\n  });\r\n\r\n  const name = form.watch(\"name\");\r\n  const { formState, setValue } = form;\r\n  useEffect(() => {\r\n    if (!formState.touchedFields.slug) {\r\n      setValue(\"slug\", toSlug(name));\r\n    }\r\n  }, [name, formState, setValue]);\r\n\r\n  return (\r\n    <Form {...form}>\r\n      <form onSubmit={form.handleSubmit(onSubmit)}>\r\n        <div className=\"flex flex-col gap-6\">\r\n          <FormField\r\n            control={form.control}\r\n            name=\"name\"\r\n            render={({ field }) => (\r\n              <FormItem>\r\n                <FormLabel>Name</FormLabel>\r\n                <FormControl>\r\n                  <Input placeholder=\"Example\" {...field} />\r\n                </FormControl>\r\n\r\n                <FormMessage />\r\n              </FormItem>\r\n            )}\r\n          />\r\n\r\n          <FormField\r\n            control={form.control}\r\n            name=\"slug\"\r\n            render={({ field }) => (\r\n              <FormItem>\r\n                <FormLabel>Slug</FormLabel>\r\n                <FormControl>\r\n                  <Input placeholder=\"example\" {...field} />\r\n                </FormControl>\r\n\r\n                <FormMessage />\r\n              </FormItem>\r\n            )}\r\n          />\r\n        </div>\r\n\r\n        <DialogFooter className=\"mt-6\">\r\n          <Button type=\"submit\">Next</Button>\r\n        </DialogFooter>\r\n      </form>\r\n    </Form>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AAAA;AAAA;AAVA;;;;;;;;;;AAsBA,MAAM,mBAAmB,CAAC,QACxB,oIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;QACP,MAAM,oIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,GAAG,CAAC;QACrB,MAAM,oIAAA,CAAA,IAAC,CACJ,MAAM,GACN,GAAG,CAAC,GACJ,IAAI,GACJ,KAAK,CAAC,8BACN,MAAM,CACL,OAAO;YACL,IAAI,UAAU,IAAI,OAAO;YACzB,MAAM,SAAS,MAAM,oIAAA,CAAA,aAAU,CAAC,SAAS,CAAC,SAAS,CAAC,KAAK,CAAC;gBACxD,MAAM;gBACN;YACF;YACA,OAAO,CAAC;QACV,GACA;YAAE,SAAS;QAAwB;IAEzC;AAGa,SAAS,2BAA2B,EACjD,QAAQ,EACR,aAAa,EAId;IACC,MAAM,EAAE,kBAAkB,EAAE,GAAG,CAAA,GAAA,0JAAA,CAAA,kBAAe,AAAD;IAC7C,MAAM,aAAa,CAAA,GAAA,qMAAA,CAAA,UAAO,AAAD,EACvB,IAAM,iBAAiB,mBAAmB,EAAE,GAC5C;QAAC,mBAAmB,EAAE;KAAC;IAGzB,MAAM,OAAO,CAAA,GAAA,8JAAA,CAAA,UAAO,AAAD,EAAc;QAC/B,UAAU,CAAA,GAAA,8JAAA,CAAA,cAAW,AAAD,EAAE,YAAY,WAAW;YAAE,MAAM;QAAQ;QAC7D,gBAAgB;QAChB,eAAe;IACjB;IAEA,MAAM,OAAO,KAAK,KAAK,CAAC;IACxB,MAAM,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG;IAChC,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,IAAI,CAAC,UAAU,aAAa,CAAC,IAAI,EAAE;YACjC,SAAS,QAAQ,CAAA,GAAA,iIAAA,CAAA,SAAM,AAAD,EAAE;QAC1B;IACF,GAAG;QAAC;QAAM;QAAW;KAAS;IAE9B,qBACE,8OAAC,4IAAA,CAAA,OAAI;QAAE,GAAG,IAAI;kBACZ,cAAA,8OAAC;YAAK,UAAU,KAAK,YAAY,CAAC;;8BAChC,8OAAC;oBAAI,WAAU;;sCACb,8OAAC,4IAAA,CAAA,YAAS;4BACR,SAAS,KAAK,OAAO;4BACrB,MAAK;4BACL,QAAQ,CAAC,EAAE,KAAK,EAAE,iBAChB,8OAAC,4IAAA,CAAA,WAAQ;;sDACP,8OAAC,4IAAA,CAAA,YAAS;sDAAC;;;;;;sDACX,8OAAC,4IAAA,CAAA,cAAW;sDACV,cAAA,8OAAC,6IAAA,CAAA,QAAK;gDAAC,aAAY;gDAAW,GAAG,KAAK;;;;;;;;;;;sDAGxC,8OAAC,4IAAA,CAAA,cAAW;;;;;;;;;;;;;;;;sCAKlB,8OAAC,4IAAA,CAAA,YAAS;4BACR,SAAS,KAAK,OAAO;4BACrB,MAAK;4BACL,QAAQ,CAAC,EAAE,KAAK,EAAE,iBAChB,8OAAC,4IAAA,CAAA,WAAQ;;sDACP,8OAAC,4IAAA,CAAA,YAAS;sDAAC;;;;;;sDACX,8OAAC,4IAAA,CAAA,cAAW;sDACV,cAAA,8OAAC,6IAAA,CAAA,QAAK;gDAAC,aAAY;gDAAW,GAAG,KAAK;;;;;;;;;;;sDAGxC,8OAAC,4IAAA,CAAA,cAAW;;;;;;;;;;;;;;;;;;;;;;8BAMpB,8OAAC,8IAAA,CAAA,eAAY;oBAAC,WAAU;8BACtB,cAAA,8OAAC,8IAAA,CAAA,SAAM;wBAAC,MAAK;kCAAS;;;;;;;;;;;;;;;;;;;;;;AAKhC","debugId":null}},
    {"offset": {"line": 428, "column": 0}, "map": {"version":3,"sources":["file:///C:/app/agentset/apps/web/src/lib/string-utils.ts"],"sourcesContent":["import { toSlug } from \"./slug\";\r\n\r\nconst tokenCharacters =\r\n  \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\r\nconst tokenCharactersLength = tokenCharacters.length;\r\n\r\nexport function generateToken(length: number) {\r\n  let result = \"\";\r\n  for (let i = 0; i < length; i++)\r\n    result += tokenCharacters.charAt(\r\n      Math.floor(Math.random() * tokenCharactersLength),\r\n    );\r\n  return result;\r\n}\r\n\r\nexport function truncate(str: string, length: number) {\r\n  if (str.length <= length) return str;\r\n  return str.slice(0, length);\r\n}\r\n\r\nexport function filenamize(value: string, length = 20) {\r\n  const token = generateToken(4);\r\n  const slug = toSlug(value, token);\r\n  const hyphenCount = (slug.match(/-/g) || []).length;\r\n  length = length + hyphenCount + token.length;\r\n\r\n  return truncate(slug, length);\r\n}\r\n\r\nexport function capitalize(str?: string | null) {\r\n  if (!str || typeof str !== \"string\") return str;\r\n\r\n  return str\r\n    .split(\" \")\r\n    .map(\r\n      (word) =>\r\n        word.charAt(0).toUpperCase() +\r\n        (word.length > 1 ? word.slice(1).toLowerCase() : \"\"),\r\n    )\r\n    .join(\" \");\r\n}\r\n\r\nexport function camelCaseToWords(str: string) {\r\n  return str\r\n    .split(/(?=[A-Z])/)\r\n    .map(capitalize)\r\n    .join(\" \");\r\n}\r\n\r\nexport function sanitizeText(text: string) {\r\n  return text.replaceAll(\"<has_function_call>\", \"\");\r\n}\r\n"],"names":[],"mappings":";;;;;;;;AAAA;;AAEA,MAAM,kBACJ;AACF,MAAM,wBAAwB,gBAAgB,MAAM;AAE7C,SAAS,cAAc,MAAc;IAC1C,IAAI,SAAS;IACb,IAAK,IAAI,IAAI,GAAG,IAAI,QAAQ,IAC1B,UAAU,gBAAgB,MAAM,CAC9B,KAAK,KAAK,CAAC,KAAK,MAAM,KAAK;IAE/B,OAAO;AACT;AAEO,SAAS,SAAS,GAAW,EAAE,MAAc;IAClD,IAAI,IAAI,MAAM,IAAI,QAAQ,OAAO;IACjC,OAAO,IAAI,KAAK,CAAC,GAAG;AACtB;AAEO,SAAS,WAAW,KAAa,EAAE,SAAS,EAAE;IACnD,MAAM,QAAQ,cAAc;IAC5B,MAAM,OAAO,CAAA,GAAA,iIAAA,CAAA,SAAM,AAAD,EAAE,OAAO;IAC3B,MAAM,cAAc,CAAC,KAAK,KAAK,CAAC,SAAS,EAAE,EAAE,MAAM;IACnD,SAAS,SAAS,cAAc,MAAM,MAAM;IAE5C,OAAO,SAAS,MAAM;AACxB;AAEO,SAAS,WAAW,GAAmB;IAC5C,IAAI,CAAC,OAAO,OAAO,QAAQ,UAAU,OAAO;IAE5C,OAAO,IACJ,KAAK,CAAC,KACN,GAAG,CACF,CAAC,OACC,KAAK,MAAM,CAAC,GAAG,WAAW,KAC1B,CAAC,KAAK,MAAM,GAAG,IAAI,KAAK,KAAK,CAAC,GAAG,WAAW,KAAK,EAAE,GAEtD,IAAI,CAAC;AACV;AAEO,SAAS,iBAAiB,GAAW;IAC1C,OAAO,IACJ,KAAK,CAAC,aACN,GAAG,CAAC,YACJ,IAAI,CAAC;AACV;AAEO,SAAS,aAAa,IAAY;IACvC,OAAO,KAAK,UAAU,CAAC,uBAAuB;AAChD","debugId":null}},
    {"offset": {"line": 472, "column": 0}, "map": {"version":3,"sources":["file:///C:/app/agentset/packages/validation/src/zod.ts"],"sourcesContent":["import * as z from \"zod\";\r\nimport { extendZodWithOpenApi } from \"zod-openapi\";\r\n\r\nextendZodWithOpenApi(z);\r\n\r\nexport default z;\r\n"],"names":[],"mappings":";;;AAAA;AACA;;;AAEA,CAAA,GAAA,6JAAA,CAAA,uBAAoB,AAAD,EAAE;uCAEN","debugId":null}},
    {"offset": {"line": 487, "column": 0}, "map": {"version":3,"sources":["file:///C:/app/agentset/packages/validation/src/embedding-model/openai.ts"],"sourcesContent":["import z from \"../zod\";\r\n\r\nexport const openaiEmbeddingModelEnum = z.enum([\r\n  \"text-embedding-3-small\",\r\n  \"text-embedding-3-large\",\r\n]);\r\n\r\nexport const OpenAIEmbeddingConfigSchema = z\r\n  .object({\r\n    provider: z.literal(\"OPENAI\"),\r\n    model: openaiEmbeddingModelEnum,\r\n    apiKey: z.string(),\r\n  })\r\n  .openapi({\r\n    title: \"OpenAI Embedding Config\",\r\n  });\r\n"],"names":[],"mappings":";;;;AAAA;;AAEO,MAAM,2BAA2B,oIAAA,CAAA,UAAC,CAAC,IAAI,CAAC;IAC7C;IACA;CACD;AAEM,MAAM,8BAA8B,oIAAA,CAAA,UAAC,CACzC,MAAM,CAAC;IACN,UAAU,oIAAA,CAAA,UAAC,CAAC,OAAO,CAAC;IACpB,OAAO;IACP,QAAQ,oIAAA,CAAA,UAAC,CAAC,MAAM;AAClB,GACC,OAAO,CAAC;IACP,OAAO;AACT","debugId":null}},
    {"offset": {"line": 510, "column": 0}, "map": {"version":3,"sources":["file:///C:/app/agentset/packages/validation/src/embedding-model/azure.ts"],"sourcesContent":["import z from \"../zod\";\r\nimport { openaiEmbeddingModelEnum } from \"./openai\";\r\n\r\nexport const AzureEmbeddingConfigSchema = z\r\n  .object({\r\n    provider: z.literal(\"AZURE_OPENAI\"),\r\n    model: openaiEmbeddingModelEnum,\r\n    baseUrl: z\r\n      .string()\r\n      .url()\r\n      .describe(\"The base URL of the Azure OpenAI API.\")\r\n      .openapi({\r\n        example: `https://example.openai.azure.com/openai/deployments`,\r\n      }),\r\n    deployment: z\r\n      .string()\r\n      .describe(\"The deployment name of the Azure OpenAI API.\"),\r\n    apiKey: z.string().describe(\"The API key for the Azure OpenAI API.\"),\r\n    apiVersion: z\r\n      .string()\r\n      .optional()\r\n      .describe(\"The API version for the Azure OpenAI API.\"),\r\n  })\r\n  .openapi({\r\n    title: \"Azure Embedding Config\",\r\n  });\r\n"],"names":[],"mappings":";;;AAAA;AACA;;;AAEO,MAAM,6BAA6B,oIAAA,CAAA,UAAC,CACxC,MAAM,CAAC;IACN,UAAU,oIAAA,CAAA,UAAC,CAAC,OAAO,CAAC;IACpB,OAAO,6JAAA,CAAA,2BAAwB;IAC/B,SAAS,oIAAA,CAAA,UAAC,CACP,MAAM,GACN,GAAG,GACH,QAAQ,CAAC,yCACT,OAAO,CAAC;QACP,SAAS,CAAC,mDAAmD,CAAC;IAChE;IACF,YAAY,oIAAA,CAAA,UAAC,CACV,MAAM,GACN,QAAQ,CAAC;IACZ,QAAQ,oIAAA,CAAA,UAAC,CAAC,MAAM,GAAG,QAAQ,CAAC;IAC5B,YAAY,oIAAA,CAAA,UAAC,CACV,MAAM,GACN,QAAQ,GACR,QAAQ,CAAC;AACd,GACC,OAAO,CAAC;IACP,OAAO;AACT","debugId":null}},
    {"offset": {"line": 535, "column": 0}, "map": {"version":3,"sources":["file:///C:/app/agentset/packages/validation/src/embedding-model/google.ts"],"sourcesContent":["import z from \"../zod\";\r\n\r\nexport const googleEmbeddingModelEnum = z.enum([\"text-embedding-004\"]);\r\n\r\nexport const GoogleEmbeddingConfigSchema = z\r\n  .object({\r\n    provider: z.literal(\"GOOGLE\"),\r\n    model: googleEmbeddingModelEnum,\r\n    apiKey: z.string(),\r\n  })\r\n  .openapi({\r\n    title: \"Google Embedding Config\",\r\n  });\r\n"],"names":[],"mappings":";;;;AAAA;;AAEO,MAAM,2BAA2B,oIAAA,CAAA,UAAC,CAAC,IAAI,CAAC;IAAC;CAAqB;AAE9D,MAAM,8BAA8B,oIAAA,CAAA,UAAC,CACzC,MAAM,CAAC;IACN,UAAU,oIAAA,CAAA,UAAC,CAAC,OAAO,CAAC;IACpB,OAAO;IACP,QAAQ,oIAAA,CAAA,UAAC,CAAC,MAAM;AAClB,GACC,OAAO,CAAC;IACP,OAAO;AACT","debugId":null}},
    {"offset": {"line": 557, "column": 0}, "map": {"version":3,"sources":["file:///C:/app/agentset/packages/validation/src/embedding-model/voyage.ts"],"sourcesContent":["import z from \"../zod\";\r\n\r\nexport const voyageEmbeddingModelEnum = z.enum([\r\n  \"voyage-3-large\",\r\n  \"voyage-3\",\r\n  \"voyage-3-lite\",\r\n  \"voyage-code-3\",\r\n  \"voyage-finance-2\",\r\n  \"voyage-law-2\",\r\n]);\r\n\r\nexport const VoyageEmbeddingConfigSchema = z\r\n  .object({\r\n    provider: z.literal(\"VOYAGE\"),\r\n    model: voyageEmbeddingModelEnum,\r\n    apiKey: z.string(),\r\n  })\r\n  .openapi({\r\n    title: \"Voyage Embedding Config\",\r\n  });\r\n"],"names":[],"mappings":";;;;AAAA;;AAEO,MAAM,2BAA2B,oIAAA,CAAA,UAAC,CAAC,IAAI,CAAC;IAC7C;IACA;IACA;IACA;IACA;IACA;CACD;AAEM,MAAM,8BAA8B,oIAAA,CAAA,UAAC,CACzC,MAAM,CAAC;IACN,UAAU,oIAAA,CAAA,UAAC,CAAC,OAAO,CAAC;IACpB,OAAO;IACP,QAAQ,oIAAA,CAAA,UAAC,CAAC,MAAM;AAClB,GACC,OAAO,CAAC;IACP,OAAO;AACT","debugId":null}},
    {"offset": {"line": 584, "column": 0}, "map": {"version":3,"sources":["file:///C:/app/agentset/packages/validation/src/embedding-model/index.ts"],"sourcesContent":["import z from \"../zod\";\r\nimport { AzureEmbeddingConfigSchema } from \"./azure\";\r\nimport { GoogleEmbeddingConfigSchema } from \"./google\";\r\nimport { OpenAIEmbeddingConfigSchema } from \"./openai\";\r\nimport { VoyageEmbeddingConfigSchema } from \"./voyage\";\r\n\r\nexport const EmbeddingConfigSchema = z\r\n  .discriminatedUnion(\"provider\", [\r\n    OpenAIEmbeddingConfigSchema,\r\n    AzureEmbeddingConfigSchema,\r\n    VoyageEmbeddingConfigSchema,\r\n    GoogleEmbeddingConfigSchema,\r\n  ])\r\n  .describe(\r\n    \"The embedding model config. If not provided, our managed embedding model will be used. Note: You can't change the embedding model config after the namespace is created.\",\r\n  );\r\n\r\nexport type EmbeddingConfig = z.infer<typeof EmbeddingConfigSchema>;\r\n\r\nexport { AzureEmbeddingConfigSchema } from \"./azure\";\r\nexport { GoogleEmbeddingConfigSchema } from \"./google\";\r\nexport { OpenAIEmbeddingConfigSchema } from \"./openai\";\r\nexport { VoyageEmbeddingConfigSchema } from \"./voyage\";\r\n"],"names":[],"mappings":";;;AAAA;AACA;AACA;AACA;AACA;;;;;;AAEO,MAAM,wBAAwB,oIAAA,CAAA,UAAC,CACnC,kBAAkB,CAAC,YAAY;IAC9B,6JAAA,CAAA,8BAA2B;IAC3B,4JAAA,CAAA,6BAA0B;IAC1B,6JAAA,CAAA,8BAA2B;IAC3B,6JAAA,CAAA,8BAA2B;CAC5B,EACA,QAAQ,CACP","debugId":null}},
    {"offset": {"line": 626, "column": 0}, "map": {"version":3,"sources":["file:///C:/app/agentset/packages/validation/src/vector-store/pinecone.ts"],"sourcesContent":["import z from \"../zod\";\r\n\r\nexport const PineconeVectorStoreConfigSchema = z\r\n  .object({\r\n    provider: z.literal(\"PINECONE\"),\r\n    apiKey: z.string().describe(\"The API key for the Pinecone index.\"),\r\n    indexHost: z\r\n      .string()\r\n      .url()\r\n      .describe(\"The host of the Pinecone index.\")\r\n      .openapi({\r\n        example: `https://example.svc.aped-1234-a56b.pinecone.io`,\r\n      }),\r\n  })\r\n  .openapi({\r\n    title: \"Pinecone Config\",\r\n  });\r\n"],"names":[],"mappings":";;;AAAA;;AAEO,MAAM,kCAAkC,oIAAA,CAAA,UAAC,CAC7C,MAAM,CAAC;IACN,UAAU,oIAAA,CAAA,UAAC,CAAC,OAAO,CAAC;IACpB,QAAQ,oIAAA,CAAA,UAAC,CAAC,MAAM,GAAG,QAAQ,CAAC;IAC5B,WAAW,oIAAA,CAAA,UAAC,CACT,MAAM,GACN,GAAG,GACH,QAAQ,CAAC,mCACT,OAAO,CAAC;QACP,SAAS,CAAC,8CAA8C,CAAC;IAC3D;AACJ,GACC,OAAO,CAAC;IACP,OAAO;AACT","debugId":null}},
    {"offset": {"line": 646, "column": 0}, "map": {"version":3,"sources":["file:///C:/app/agentset/packages/validation/src/vector-store/index.ts"],"sourcesContent":["import z from \"../zod\";\r\nimport { PineconeVectorStoreConfigSchema } from \"./pinecone\";\r\n\r\nexport const VectorStoreSchema = z\r\n  .discriminatedUnion(\"provider\", [PineconeVectorStoreConfigSchema])\r\n  .describe(\r\n    \"The vector store config. If not provided, our managed vector store will be used. Note: You can't change the vector store config after the namespace is created.\",\r\n  );\r\n\r\nexport type VectorStoreConfig = z.infer<typeof VectorStoreSchema>;\r\n\r\nexport { PineconeVectorStoreConfigSchema } from \"./pinecone\";\r\n"],"names":[],"mappings":";;;AAAA;AACA;;;AAEO,MAAM,oBAAoB,oIAAA,CAAA,UAAC,CAC/B,kBAAkB,CAAC,YAAY;IAAC,4JAAA,CAAA,kCAA+B;CAAC,EAChE,QAAQ,CACP","debugId":null}},
    {"offset": {"line": 673, "column": 0}, "map": {"version":3,"sources":["file:///C:/app/agentset/packages/validation/src/ingest-payload/index.ts"],"sourcesContent":["import z from \"../zod\";\r\n\r\nconst nameSchema = z\r\n  .string()\r\n  .nullable()\r\n  .optional()\r\n  .describe(\"The name of the ingest job.\");\r\n\r\nconst fileNameSchema = z\r\n  .string()\r\n  .nullable()\r\n  .optional()\r\n  .describe(\"The name of the file.\");\r\n\r\nexport const textPayloadSchema = z\r\n  .object({\r\n    type: z.literal(\"TEXT\"),\r\n    text: z.string().describe(\"The text to ingest.\"),\r\n    name: nameSchema,\r\n  })\r\n  .openapi({\r\n    title: \"Text Payload\",\r\n  });\r\n\r\nexport const filePayloadSchema = z\r\n  .object({\r\n    type: z.literal(\"FILE\"),\r\n    fileUrl: z.string().describe(\"The URL of the file to ingest.\"),\r\n    name: nameSchema,\r\n  })\r\n  .openapi({\r\n    title: \"URL Payload\",\r\n  });\r\n\r\nexport const managedFilePayloadSchema = z\r\n  .object({\r\n    type: z.literal(\"MANAGED_FILE\"),\r\n    key: z.string().describe(\"The key of the managed file to ingest.\"),\r\n    name: nameSchema,\r\n  })\r\n  .openapi({\r\n    title: \"Managed File Payload\",\r\n  });\r\n\r\nexport const managedFilesPayloadSchema = z\r\n  .object({\r\n    type: z.literal(\"MANAGED_FILES\"),\r\n    files: z.array(\r\n      z.object({\r\n        key: z.string().describe(\"The key of the managed file to ingest.\"),\r\n        name: fileNameSchema,\r\n      }),\r\n    ),\r\n    name: nameSchema,\r\n  })\r\n  .openapi({\r\n    title: \"Managed Files Payload\",\r\n  });\r\n\r\nexport const urlsPayloadSchema = z\r\n  .object({\r\n    type: z.literal(\"URLS\"),\r\n    urls: z.array(z.string().url()).describe(\"The URLs to ingest.\"),\r\n    name: nameSchema,\r\n  })\r\n  .openapi({\r\n    title: \"URLs Payload\",\r\n  });\r\n\r\nexport const ingestJobPayloadSchema = z\r\n  .discriminatedUnion(\"type\", [\r\n    textPayloadSchema,\r\n    filePayloadSchema,\r\n    managedFilePayloadSchema,\r\n    managedFilesPayloadSchema,\r\n    urlsPayloadSchema,\r\n  ])\r\n  .describe(\"The ingest job payload.\");\r\n\r\nexport type IngestJobPayload = z.infer<typeof ingestJobPayloadSchema>;\r\n\r\n// type IngestJobPayloadConnection = {\r\n//   type: \"CONNECTION\";\r\n//   connectionId: string;\r\n// };\r\n\r\n// type IngestJobPayloadS3 = {\r\n//   type: \"S3\";\r\n//   bucket: string;\r\n//   prefix?: string;\r\n//   fileTypes?: string[];\r\n// };\r\n\r\n// type IngestJobPayloadGoogleDrive = {\r\n//   type: \"GOOGLE_DRIVE\";\r\n//   folderId: string;\r\n//   fileTypes?: string[];\r\n// };\r\n\r\nexport const configSchema = z\r\n  .object({\r\n    chunkSize: z.number().optional().describe(\"Custom chunk size.\"),\r\n    chunkOverlap: z.number().optional().describe(\"Custom chunk overlap.\"),\r\n    metadata: z\r\n      .record(z.string(), z.unknown())\r\n      .optional()\r\n      .describe(\"Custom metadata to be added to the ingested documents.\"),\r\n    chunkingStrategy: z\r\n      .enum([\"basic\", \"by_title\"])\r\n      .optional()\r\n      .describe(\"The chunking strategy to use. Defaults to `basic`.\"),\r\n    strategy: z\r\n      .enum([\"auto\", \"fast\", \"hi_res\", \"ocr_only\"])\r\n      .optional()\r\n      .describe(\"The strategy to use. Defaults to `auto`.\"),\r\n    // languages: z.array(z.string()).optional().describe(\"The languages to use.\"),\r\n  })\r\n  .describe(\"The ingest job config.\");\r\n\r\nexport type IngestJobConfig = z.infer<typeof configSchema>;\r\n"],"names":[],"mappings":";;;;;;;;;AAAA;;AAEA,MAAM,aAAa,oIAAA,CAAA,UAAC,CACjB,MAAM,GACN,QAAQ,GACR,QAAQ,GACR,QAAQ,CAAC;AAEZ,MAAM,iBAAiB,oIAAA,CAAA,UAAC,CACrB,MAAM,GACN,QAAQ,GACR,QAAQ,GACR,QAAQ,CAAC;AAEL,MAAM,oBAAoB,oIAAA,CAAA,UAAC,CAC/B,MAAM,CAAC;IACN,MAAM,oIAAA,CAAA,UAAC,CAAC,OAAO,CAAC;IAChB,MAAM,oIAAA,CAAA,UAAC,CAAC,MAAM,GAAG,QAAQ,CAAC;IAC1B,MAAM;AACR,GACC,OAAO,CAAC;IACP,OAAO;AACT;AAEK,MAAM,oBAAoB,oIAAA,CAAA,UAAC,CAC/B,MAAM,CAAC;IACN,MAAM,oIAAA,CAAA,UAAC,CAAC,OAAO,CAAC;IAChB,SAAS,oIAAA,CAAA,UAAC,CAAC,MAAM,GAAG,QAAQ,CAAC;IAC7B,MAAM;AACR,GACC,OAAO,CAAC;IACP,OAAO;AACT;AAEK,MAAM,2BAA2B,oIAAA,CAAA,UAAC,CACtC,MAAM,CAAC;IACN,MAAM,oIAAA,CAAA,UAAC,CAAC,OAAO,CAAC;IAChB,KAAK,oIAAA,CAAA,UAAC,CAAC,MAAM,GAAG,QAAQ,CAAC;IACzB,MAAM;AACR,GACC,OAAO,CAAC;IACP,OAAO;AACT;AAEK,MAAM,4BAA4B,oIAAA,CAAA,UAAC,CACvC,MAAM,CAAC;IACN,MAAM,oIAAA,CAAA,UAAC,CAAC,OAAO,CAAC;IAChB,OAAO,oIAAA,CAAA,UAAC,CAAC,KAAK,CACZ,oIAAA,CAAA,UAAC,CAAC,MAAM,CAAC;QACP,KAAK,oIAAA,CAAA,UAAC,CAAC,MAAM,GAAG,QAAQ,CAAC;QACzB,MAAM;IACR;IAEF,MAAM;AACR,GACC,OAAO,CAAC;IACP,OAAO;AACT;AAEK,MAAM,oBAAoB,oIAAA,CAAA,UAAC,CAC/B,MAAM,CAAC;IACN,MAAM,oIAAA,CAAA,UAAC,CAAC,OAAO,CAAC;IAChB,MAAM,oIAAA,CAAA,UAAC,CAAC,KAAK,CAAC,oIAAA,CAAA,UAAC,CAAC,MAAM,GAAG,GAAG,IAAI,QAAQ,CAAC;IACzC,MAAM;AACR,GACC,OAAO,CAAC;IACP,OAAO;AACT;AAEK,MAAM,yBAAyB,oIAAA,CAAA,UAAC,CACpC,kBAAkB,CAAC,QAAQ;IAC1B;IACA;IACA;IACA;IACA;CACD,EACA,QAAQ,CAAC;AAsBL,MAAM,eAAe,oIAAA,CAAA,UAAC,CAC1B,MAAM,CAAC;IACN,WAAW,oIAAA,CAAA,UAAC,CAAC,MAAM,GAAG,QAAQ,GAAG,QAAQ,CAAC;IAC1C,cAAc,oIAAA,CAAA,UAAC,CAAC,MAAM,GAAG,QAAQ,GAAG,QAAQ,CAAC;IAC7C,UAAU,oIAAA,CAAA,UAAC,CACR,MAAM,CAAC,oIAAA,CAAA,UAAC,CAAC,MAAM,IAAI,oIAAA,CAAA,UAAC,CAAC,OAAO,IAC5B,QAAQ,GACR,QAAQ,CAAC;IACZ,kBAAkB,oIAAA,CAAA,UAAC,CAChB,IAAI,CAAC;QAAC;QAAS;KAAW,EAC1B,QAAQ,GACR,QAAQ,CAAC;IACZ,UAAU,oIAAA,CAAA,UAAC,CACR,IAAI,CAAC;QAAC;QAAQ;QAAQ;QAAU;KAAW,EAC3C,QAAQ,GACR,QAAQ,CAAC;AAEd,GACC,QAAQ,CAAC","debugId":null}},
    {"offset": {"line": 752, "column": 0}, "map": {"version":3,"sources":["file:///C:/app/agentset/packages/validation/src/document-payload/index.ts"],"sourcesContent":["import {\r\n  filePayloadSchema,\r\n  managedFilePayloadSchema,\r\n  textPayloadSchema,\r\n} from \"../ingest-payload\";\r\nimport z from \"../zod\";\r\n\r\n// remove name from the payload since it's a separate field\r\nexport const documentPayloadSchema = z\r\n  .discriminatedUnion(\"type\", [\r\n    textPayloadSchema.omit({ name: true }),\r\n    filePayloadSchema.omit({ name: true }),\r\n    managedFilePayloadSchema.omit({ name: true }),\r\n  ])\r\n  .describe(\"The source of the document.\");\r\n\r\nexport type DocumentPayload = z.infer<typeof documentPayloadSchema>;\r\n\r\nexport const documentPropertiesSchema = z\r\n  .object({\r\n    fileSize: z.number().describe(\"The size of the file in bytes.\"),\r\n    mimeType: z\r\n      .string()\r\n      .nullable()\r\n      .default(null)\r\n      .describe(\"The MIME type of the file.\"),\r\n  })\r\n  .describe(\"The properties of the document.\");\r\n\r\nexport type DocumentProperties = z.infer<typeof documentPropertiesSchema>;\r\n"],"names":[],"mappings":";;;;AAAA;AAKA;;;AAGO,MAAM,wBAAwB,oIAAA,CAAA,UAAC,CACnC,kBAAkB,CAAC,QAAQ;IAC1B,2JAAA,CAAA,oBAAiB,CAAC,IAAI,CAAC;QAAE,MAAM;IAAK;IACpC,2JAAA,CAAA,oBAAiB,CAAC,IAAI,CAAC;QAAE,MAAM;IAAK;IACpC,2JAAA,CAAA,2BAAwB,CAAC,IAAI,CAAC;QAAE,MAAM;IAAK;CAC5C,EACA,QAAQ,CAAC;AAIL,MAAM,2BAA2B,oIAAA,CAAA,UAAC,CACtC,MAAM,CAAC;IACN,UAAU,oIAAA,CAAA,UAAC,CAAC,MAAM,GAAG,QAAQ,CAAC;IAC9B,UAAU,oIAAA,CAAA,UAAC,CACR,MAAM,GACN,QAAQ,GACR,OAAO,CAAC,MACR,QAAQ,CAAC;AACd,GACC,QAAQ,CAAC","debugId":null}},
    {"offset": {"line": 781, "column": 0}, "map": {"version":3,"sources":["file:///C:/app/agentset/packages/validation/src/index.ts"],"sourcesContent":["export * from \"./embedding-model\";\r\nexport * from \"./vector-store\";\r\nexport * from \"./ingest-payload\";\r\nexport * from \"./document-payload\";\r\n"],"names":[],"mappings":";AAAA;AACA;AACA;AACA","debugId":null}},
    {"offset": {"line": 808, "column": 0}, "map": {"version":3,"sources":["file:///C:/app/agentset/apps/web/src/components/create-namespace/models.ts"],"sourcesContent":["import {\r\n  AnthropicIcon,\r\n  GoogleIcon,\r\n  MicrosoftAzureIcon,\r\n  OpenAIIcon,\r\n  PineconeIcon,\r\n  QdrantIcon,\r\n  UpstashIcon,\r\n} from \"@agentset/ui\";\r\nimport {\r\n  AzureEmbeddingConfigSchema,\r\n  GoogleEmbeddingConfigSchema,\r\n  OpenAIEmbeddingConfigSchema,\r\n  PineconeVectorStoreConfigSchema,\r\n  VoyageEmbeddingConfigSchema,\r\n} from \"@agentset/validation\";\r\n\r\nexport const embeddingModels = [\r\n  {\r\n    value: AzureEmbeddingConfigSchema.shape.provider.value,\r\n    models: AzureEmbeddingConfigSchema.shape.model.options,\r\n    icon: MicrosoftAzureIcon,\r\n  },\r\n  {\r\n    value: OpenAIEmbeddingConfigSchema.shape.provider.value,\r\n    models: OpenAIEmbeddingConfigSchema.shape.model.options,\r\n    icon: OpenAIIcon,\r\n  },\r\n  {\r\n    value: VoyageEmbeddingConfigSchema.shape.provider.value,\r\n    models: VoyageEmbeddingConfigSchema.shape.model.options,\r\n    icon: AnthropicIcon,\r\n  },\r\n  {\r\n    value: GoogleEmbeddingConfigSchema.shape.provider.value,\r\n    models: GoogleEmbeddingConfigSchema.shape.model.options,\r\n    icon: GoogleIcon,\r\n  },\r\n];\r\n\r\nexport const vectorStores = [\r\n  {\r\n    value: PineconeVectorStoreConfigSchema.shape.provider.value,\r\n    icon: PineconeIcon,\r\n  },\r\n  {\r\n    value: \"upstash\",\r\n    comingSoon: true,\r\n    icon: UpstashIcon,\r\n  },\r\n  {\r\n    value: \"qdrant\",\r\n    comingSoon: true,\r\n    icon: QdrantIcon,\r\n  },\r\n];\r\n"],"names":[],"mappings":";;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AASA;AAAA;AAAA;AAAA;AAAA;AAAA;;;AAQO,MAAM,kBAAkB;IAC7B;QACE,OAAO,4JAAA,CAAA,6BAA0B,CAAC,KAAK,CAAC,QAAQ,CAAC,KAAK;QACtD,QAAQ,4JAAA,CAAA,6BAA0B,CAAC,KAAK,CAAC,KAAK,CAAC,OAAO;QACtD,MAAM,wIAAA,CAAA,qBAAkB;IAC1B;IACA;QACE,OAAO,6JAAA,CAAA,8BAA2B,CAAC,KAAK,CAAC,QAAQ,CAAC,KAAK;QACvD,QAAQ,6JAAA,CAAA,8BAA2B,CAAC,KAAK,CAAC,KAAK,CAAC,OAAO;QACvD,MAAM,yIAAA,CAAA,aAAU;IAClB;IACA;QACE,OAAO,6JAAA,CAAA,8BAA2B,CAAC,KAAK,CAAC,QAAQ,CAAC,KAAK;QACvD,QAAQ,6JAAA,CAAA,8BAA2B,CAAC,KAAK,CAAC,KAAK,CAAC,OAAO;QACvD,MAAM,4IAAA,CAAA,gBAAa;IACrB;IACA;QACE,OAAO,6JAAA,CAAA,8BAA2B,CAAC,KAAK,CAAC,QAAQ,CAAC,KAAK;QACvD,QAAQ,6JAAA,CAAA,8BAA2B,CAAC,KAAK,CAAC,KAAK,CAAC,OAAO;QACvD,MAAM,yIAAA,CAAA,aAAU;IAClB;CACD;AAEM,MAAM,eAAe;IAC1B;QACE,OAAO,4JAAA,CAAA,kCAA+B,CAAC,KAAK,CAAC,QAAQ,CAAC,KAAK;QAC3D,MAAM,2IAAA,CAAA,eAAY;IACpB;IACA;QACE,OAAO;QACP,YAAY;QACZ,MAAM,0IAAA,CAAA,cAAW;IACnB;IACA;QACE,OAAO;QACP,YAAY;QACZ,MAAM,yIAAA,CAAA,aAAU;IAClB;CACD","debugId":null}},
    {"offset": {"line": 872, "column": 0}, "map": {"version":3,"sources":["file:///C:/app/agentset/apps/web/src/components/create-namespace/embedding-step.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useMemo } from \"react\";\nimport { camelCaseToWords, capitalize } from \"@/lib/string-utils\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { useForm } from \"react-hook-form\";\nimport { z } from \"zod\";\n\nimport {\n  Button,\n  DialogFooter,\n  Form,\n  FormControl,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormMessage,\n  Input,\n  Label,\n  Logo,\n  RadioButton,\n  RadioGroup,\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@agentset/ui\";\nimport { EmbeddingConfigSchema } from \"@agentset/validation\";\n\nimport { embeddingModels } from \"./models\";\n\nconst formSchema = z.object({\n  embeddingModel: EmbeddingConfigSchema.optional(),\n});\n\nexport default function CreateNamespaceEmbeddingStep({\n  onSubmit,\n  onBack,\n  defaultValues,\n}: {\n  onSubmit: (values: z.infer<typeof formSchema>) => void;\n  onBack: () => void;\n  defaultValues?: Partial<z.infer<typeof formSchema>>;\n}) {\n  const form = useForm<z.infer<typeof formSchema>>({\n    resolver: zodResolver(formSchema),\n    defaultValues,\n  });\n\n  // when the provider changes, set the model to the default model for the provider\n  const currentEmbeddingProvider = form.watch(\"embeddingModel\")?.provider;\n\n  useEffect(() => {\n    if (currentEmbeddingProvider) {\n      const model = embeddingModels.find(\n        (p) => p.value === currentEmbeddingProvider,\n      )?.models[0];\n\n      // reset other fields in the embeddingModel object\n      form.resetField(\"embeddingModel\", {\n        defaultValue: {\n          provider: currentEmbeddingProvider,\n          model,\n        } as z.infer<typeof EmbeddingConfigSchema>,\n      });\n    } else {\n      form.setValue(\"embeddingModel\", undefined);\n    }\n    // eslint-disable-next-line react-compiler/react-compiler\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [currentEmbeddingProvider]);\n\n  const currentEmbeddingOptions = useMemo(() => {\n    const shape =\n      EmbeddingConfigSchema.optionsMap.get(currentEmbeddingProvider)?.shape ??\n      {};\n    return {\n      fields: Object.keys(shape).filter(\n        (key) => key !== \"provider\" && key !== \"model\",\n      ),\n      shape,\n    };\n  }, [currentEmbeddingProvider]);\n\n  return (\n    <Form {...form}>\n      <form onSubmit={form.handleSubmit(onSubmit)}>\n        <div className=\"flex flex-col gap-6\">\n          <FormField\n            control={form.control}\n            name=\"embeddingModel.provider\"\n            render={({ field }) => (\n              <FormItem className=\"mt-3\">\n                <FormControl>\n                  <RadioGroup\n                    onValueChange={(newValue) => {\n                      if (newValue === \"agentset\") {\n                        form.setValue(\"embeddingModel\", undefined);\n                      } else {\n                        field.onChange(newValue);\n                      }\n                    }}\n                    defaultValue={\n                      (field.value as typeof field.value | undefined) ??\n                      \"agentset\"\n                    }\n                    className=\"grid grid-cols-3 gap-4\"\n                  >\n                    <RadioButton\n                      value=\"agentset\"\n                      label=\"Agentset\"\n                      icon={Logo}\n                      note=\"Default\"\n                    />\n\n                    {embeddingModels.map((provider) => (\n                      <RadioButton\n                        key={provider.value}\n                        value={provider.value}\n                        label={capitalize(provider.value.split(\"_\").join(\" \"))!}\n                        icon={provider.icon}\n                      />\n                    ))}\n                  </RadioGroup>\n                </FormControl>\n\n                <FormMessage />\n              </FormItem>\n            )}\n          />\n\n          {currentEmbeddingProvider && (\n            <FormField\n              control={form.control}\n              name=\"embeddingModel.model\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Model</FormLabel>\n                  <FormControl>\n                    <Select\n                      defaultValue={field.value}\n                      value={field.value}\n                      onValueChange={field.onChange}\n                    >\n                      <SelectTrigger className=\"w-xs\">\n                        <SelectValue placeholder=\"Select a model\" />\n                      </SelectTrigger>\n\n                      <SelectContent>\n                        {embeddingModels\n                          .find((p) => p.value === currentEmbeddingProvider)\n                          ?.models.map((model) => (\n                            <SelectItem key={model} value={model}>\n                              {model}\n                            </SelectItem>\n                          ))}\n                      </SelectContent>\n                    </Select>\n                  </FormControl>\n\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n          )}\n\n          {/* render other fields based on the provider dynamically */}\n          {currentEmbeddingProvider ? (\n            currentEmbeddingOptions.fields.map((key) => (\n              <FormField\n                key={key}\n                control={form.control}\n                name={\n                  `embeddingModel.${key}` as `embeddingModel.${keyof z.infer<typeof EmbeddingConfigSchema>}`\n                }\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>\n                      {camelCaseToWords(key)}{\" \"}\n                      {currentEmbeddingOptions.shape[\n                        key\n                      ]?.isOptional() ? null : (\n                        <span className=\"text-destructive-foreground\">*</span>\n                      )}\n                    </FormLabel>\n\n                    <FormControl>\n                      <Input {...field} value={field.value || \"\"} />\n                    </FormControl>\n\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n            ))\n          ) : (\n            <div className=\"flex flex-col gap-2\">\n              <Label data-slot=\"form-label\">Model</Label>\n\n              <Select disabled value=\"default\">\n                <SelectTrigger className=\"w-xs\">\n                  <SelectValue placeholder=\"Select a model\" />\n                </SelectTrigger>\n\n                <SelectContent>\n                  <SelectItem value=\"default\">\n                    OpenAI / text-embedding-3-large\n                  </SelectItem>\n                </SelectContent>\n              </Select>\n            </div>\n          )}\n        </div>\n\n        <DialogFooter className=\"mt-10 flex-row items-center justify-between sm:justify-between\">\n          <p className=\"text-muted-foreground text-xs\">\n            Can't find the model you need?{\" \"}\n            <a\n              href=\"mailto:support@agentset.ai\"\n              target=\"_blank\"\n              rel=\"noreferrer\"\n              className=\"text-primary underline\"\n            >\n              Contact us\n            </a>\n          </p>\n\n          <div className=\"flex gap-2\">\n            <Button type=\"button\" variant=\"outline\" onClick={onBack}>\n              Back\n            </Button>\n            <Button type=\"submit\">Next</Button>\n          </div>\n        </DialogFooter>\n      </form>\n    </Form>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1275, "column": 0}, "map": {"version":3,"sources":["file:///C:/app/agentset/apps/web/src/components/create-namespace/vector-store-step.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useMemo } from \"react\";\r\nimport { camelCaseToWords, capitalize } from \"@/lib/string-utils\";\r\nimport { zodResolver } from \"@hookform/resolvers/zod\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { z } from \"zod\";\r\n\r\nimport {\r\n  Button,\r\n  DialogFooter,\r\n  Form,\r\n  FormControl,\r\n  FormField,\r\n  FormItem,\r\n  FormLabel,\r\n  FormMessage,\r\n  Input,\r\n  Label,\r\n  Logo,\r\n  RadioButton,\r\n  RadioGroup,\r\n  Select,\r\n  SelectContent,\r\n  SelectItem,\r\n  SelectTrigger,\r\n  SelectValue,\r\n} from \"@agentset/ui\";\r\nimport { VectorStoreSchema } from \"@agentset/validation\";\r\n\r\nimport { vectorStores } from \"./models\";\r\n\r\nconst formSchema = z.object({\r\n  vectorStore: VectorStoreSchema.optional(),\r\n});\r\n\r\nexport default function CreateNamespaceVectorStoreStep({\r\n  onSubmit,\r\n  onBack,\r\n  isLoading,\r\n}: {\r\n  onSubmit: (values: z.infer<typeof formSchema>) => void;\r\n  isLoading: boolean;\r\n  onBack: () => void;\r\n}) {\r\n  const form = useForm<z.infer<typeof formSchema>>({\r\n    resolver: zodResolver(formSchema, undefined),\r\n  });\r\n\r\n  // when the provider changes, set the model to the default model for the provider\r\n  const currentVectorProvider = form.watch(\"vectorStore\")?.provider;\r\n\r\n  useEffect(() => {\r\n    if (currentVectorProvider) {\r\n      // reset other fields in the embeddingModel object\r\n      form.reset({\r\n        vectorStore: {\r\n          provider: currentVectorProvider,\r\n        } as z.infer<typeof VectorStoreSchema>,\r\n      });\r\n    } else {\r\n      form.setValue(\"vectorStore\", undefined);\r\n    }\r\n    // eslint-disable-next-line react-compiler/react-compiler\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [currentVectorProvider]);\r\n\r\n  const currentVectorStoreOptions = useMemo(() => {\r\n    const shape =\r\n      VectorStoreSchema.optionsMap.get(currentVectorProvider)?.shape ?? {};\r\n    return {\r\n      fields: Object.keys(shape).filter((key) => key !== \"provider\"),\r\n      shape,\r\n    };\r\n  }, [currentVectorProvider]);\r\n\r\n  return (\r\n    <Form {...form}>\r\n      <form onSubmit={form.handleSubmit(onSubmit)}>\r\n        <div className=\"flex flex-col gap-6\">\r\n          <FormField\r\n            control={form.control}\r\n            name=\"vectorStore.provider\"\r\n            render={({ field }) => (\r\n              <FormItem className=\"mt-3\">\r\n                <FormControl>\r\n                  <RadioGroup\r\n                    onValueChange={(newValue) => {\r\n                      if (newValue === \"agentset\") {\r\n                        form.setValue(\"vectorStore\", undefined);\r\n                      } else {\r\n                        field.onChange(newValue);\r\n                      }\r\n                    }}\r\n                    defaultValue={\r\n                      (field.value as typeof field.value | undefined) ??\r\n                      \"agentset\"\r\n                    }\r\n                    className=\"grid grid-cols-3 gap-4\"\r\n                  >\r\n                    <RadioButton\r\n                      value=\"agentset\"\r\n                      label=\"Agentset\"\r\n                      icon={Logo}\r\n                      note=\"Default\"\r\n                    />\r\n\r\n                    {vectorStores.map((store) => (\r\n                      <RadioButton\r\n                        key={store.value}\r\n                        value={store.value}\r\n                        label={capitalize(store.value)!}\r\n                        icon={store.icon}\r\n                        note={store.comingSoon ? \"Coming Soon\" : undefined}\r\n                        noteStyle=\"muted\"\r\n                        disabled={store.comingSoon}\r\n                      />\r\n                    ))}\r\n                  </RadioGroup>\r\n                </FormControl>\r\n\r\n                <FormMessage />\r\n              </FormItem>\r\n            )}\r\n          />\r\n\r\n          {/* render other fields based on the provider dynamically */}\r\n          {currentVectorProvider ? (\r\n            currentVectorStoreOptions.fields.map((key) => (\r\n              <FormField\r\n                key={key}\r\n                control={form.control}\r\n                name={\r\n                  `vectorStore.${key}` as `vectorStore.${keyof z.infer<typeof VectorStoreSchema>}`\r\n                }\r\n                render={({ field }) => (\r\n                  <FormItem>\r\n                    <FormLabel>\r\n                      {camelCaseToWords(key)}{\" \"}\r\n                      {currentVectorStoreOptions.shape[\r\n                        key\r\n                      ]?.isOptional() ? null : (\r\n                        <span className=\"text-destructive-foreground\">*</span>\r\n                      )}\r\n                    </FormLabel>\r\n\r\n                    <FormControl>\r\n                      <Input {...field} />\r\n                    </FormControl>\r\n\r\n                    <FormMessage />\r\n                  </FormItem>\r\n                )}\r\n              />\r\n            ))\r\n          ) : (\r\n            <div className=\"flex flex-col gap-2\">\r\n              <Label data-slot=\"form-label\">Vector Store</Label>\r\n\r\n              <Select disabled value=\"default\">\r\n                <SelectTrigger className=\"w-xs\">\r\n                  <SelectValue placeholder=\"Select a vector store\" />\r\n                </SelectTrigger>\r\n\r\n                <SelectContent>\r\n                  <SelectItem value=\"default\">Pinecone</SelectItem>\r\n                </SelectContent>\r\n              </Select>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        <DialogFooter className=\"mt-10 flex-row items-center justify-between sm:justify-between\">\r\n          <p className=\"text-muted-foreground text-xs\">\r\n            Can't find the vector store you need?{\" \"}\r\n            <a\r\n              href=\"mailto:support@agentset.ai\"\r\n              target=\"_blank\"\r\n              rel=\"noreferrer\"\r\n              className=\"text-primary underline\"\r\n            >\r\n              Contact us\r\n            </a>\r\n          </p>\r\n\r\n          <div className=\"flex gap-2\">\r\n            <Button\r\n              type=\"button\"\r\n              variant=\"outline\"\r\n              onClick={onBack}\r\n              disabled={isLoading}\r\n            >\r\n              Back\r\n            </Button>\r\n            <Button type=\"submit\" isLoading={isLoading}>\r\n              Create\r\n            </Button>\r\n          </div>\r\n        </DialogFooter>\r\n      </form>\r\n    </Form>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1606, "column": 0}, "map": {"version":3,"sources":["file:///C:/app/agentset/apps/web/src/components/create-namespace/index.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useMemo, useState } from \"react\";\r\nimport { toSlug } from \"@/lib/slug\";\r\nimport { useTRPC } from \"@/trpc/react\";\r\nimport { useRouter } from \"@bprogress/next/app\";\r\nimport { useMutation, useQueryClient } from \"@tanstack/react-query\";\r\nimport { toast } from \"sonner\";\r\n\r\nimport type { EmbeddingConfig, VectorStoreConfig } from \"@agentset/validation\";\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogDescription,\r\n  DialogHeader,\r\n  DialogTitle,\r\n} from \"@agentset/ui\";\r\n\r\nimport CreateNamespaceDetailsStep from \"./details-step\";\r\nimport CreateNamespaceEmbeddingStep from \"./embedding-step\";\r\nimport CreateNamespaceVectorStoreStep from \"./vector-store-step\";\r\n\r\nexport default function CreateNamespaceDialog({\r\n  organization,\r\n  open,\r\n  setOpen,\r\n}: {\r\n  organization?: { id: string; slug: string; name: string } | null;\r\n  open: boolean;\r\n  setOpen: (open: boolean) => void;\r\n}) {\r\n  const router = useRouter();\r\n  const trpc = useTRPC();\r\n  const queryClient = useQueryClient();\r\n\r\n  const [step, setStep] = useState<\"details\" | \"embeddings\" | \"vector-store\">(\r\n    \"details\",\r\n  );\r\n\r\n  const defaultName = useMemo(() => {\r\n    return organization?.name\r\n      ? `${organization.name}'s First Namespace`\r\n      : \"Default\";\r\n  }, [organization]);\r\n  const defaultSlug = useMemo(() => toSlug(defaultName), [defaultName]);\r\n\r\n  const [name, setName] = useState(defaultName);\r\n  const [slug, setSlug] = useState(defaultSlug);\r\n\r\n  useEffect(() => {\r\n    setName(defaultName);\r\n    setSlug(toSlug(defaultName));\r\n  }, [defaultName]);\r\n\r\n  const [embeddingModel, setEmbeddingModel] = useState<\r\n    EmbeddingConfig | undefined\r\n  >(undefined);\r\n\r\n  const { isPending, mutateAsync: createNamespace } = useMutation(\r\n    trpc.namespace.createNamespace.mutationOptions({\r\n      onSuccess: (data) => {\r\n        toast.success(\"Namespace created\");\r\n        setOpen(false);\r\n\r\n        setName(defaultName);\r\n        setSlug(defaultSlug);\r\n\r\n        setEmbeddingModel(undefined);\r\n        setStep(\"details\");\r\n\r\n        if (organization) {\r\n          router.push(`/${organization.slug}/${data.slug}/quick-start`);\r\n        }\r\n\r\n        void queryClient.invalidateQueries(trpc.organization.all.queryFilter());\r\n      },\r\n      onError: (error) => {\r\n        toast.error(error.message);\r\n      },\r\n    }),\r\n  );\r\n\r\n  const onSubmit = async (vectorStore?: VectorStoreConfig) => {\r\n    if (!organization) return;\r\n\r\n    await createNamespace({\r\n      orgId: organization.id,\r\n      name: name,\r\n      slug: slug,\r\n      embeddingConfig: embeddingModel,\r\n      vectorStoreConfig: vectorStore,\r\n    });\r\n  };\r\n\r\n  return (\r\n    <Dialog\r\n      open={open}\r\n      onOpenChange={(newOpen) => {\r\n        if (isPending) return;\r\n        setOpen(newOpen);\r\n      }}\r\n    >\r\n      <DialogContent className=\"sm:max-w-xl\">\r\n        <DialogHeader>\r\n          <DialogTitle>\r\n            {step === \"details\"\r\n              ? \"Create namespace\"\r\n              : step === \"embeddings\"\r\n                ? \"Embeddings\"\r\n                : \"Vector store\"}\r\n          </DialogTitle>\r\n          <DialogDescription>\r\n            {step === \"details\"\r\n              ? \"Create a new namespace to start ingesting data.\"\r\n              : step === \"embeddings\"\r\n                ? \"Choose an embedding model for your namespace. Note that you can't change the embedding model once the namespace is created.\"\r\n                : \"Choose a vector store for your namespace. Note that you can't change the vector store once the namespace is created.\"}\r\n          </DialogDescription>\r\n        </DialogHeader>\r\n\r\n        {step === \"details\" ? (\r\n          <CreateNamespaceDetailsStep\r\n            defaultValues={{\r\n              name,\r\n              slug,\r\n            }}\r\n            onSubmit={(values) => {\r\n              setName(values.name);\r\n              setSlug(values.slug);\r\n              setStep(\"embeddings\");\r\n            }}\r\n          />\r\n        ) : step === \"embeddings\" ? (\r\n          <CreateNamespaceEmbeddingStep\r\n            defaultValues={embeddingModel ? { embeddingModel } : undefined}\r\n            onSubmit={(values) => {\r\n              setEmbeddingModel(values.embeddingModel ?? undefined);\r\n              setStep(\"vector-store\");\r\n            }}\r\n            onBack={() => setStep(\"details\")}\r\n          />\r\n        ) : (\r\n          <CreateNamespaceVectorStoreStep\r\n            isLoading={isPending}\r\n            onSubmit={(values) => onSubmit(values.vectorStore)}\r\n            onBack={() => setStep(\"embeddings\")}\r\n          />\r\n        )}\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1768, "column": 0}, "map": {"version":3,"sources":["file:///C:/app/agentset/apps/web/src/components/dashboard-page-wrapper.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useTransition } from \"react\";\r\nimport { useParams, usePathname } from \"next/navigation\";\r\nimport { useNamespace } from \"@/contexts/namespace-context\";\r\nimport { useOrganization } from \"@/contexts/organization-context\";\r\nimport { useTRPC } from \"@/trpc/react\";\r\nimport { useRouter } from \"@bprogress/next/app\";\r\nimport { useQuery } from \"@tanstack/react-query\";\r\nimport { ChevronsUpDownIcon, PlusIcon } from \"lucide-react\";\r\n\r\nimport type { Namespace } from \"@agentset/db\";\r\nimport {\r\n  Breadcrumb,\r\n  BreadcrumbItem,\r\n  BreadcrumbList,\r\n  BreadcrumbSeparator,\r\n  Button,\r\n  cn,\r\n  DropdownMenu,\r\n  DropdownMenuContent,\r\n  DropdownMenuItem,\r\n  DropdownMenuSeparator,\r\n  DropdownMenuTrigger,\r\n  SidebarTrigger,\r\n} from \"@agentset/ui\";\r\n\r\nimport { NavUser } from \"./app-sidebar/nav-user\";\r\nimport CreateNamespaceDialog from \"./create-namespace\";\r\n\r\nconst NamespaceSwitcher = () => {\r\n  const { activeNamespace } = useNamespace();\r\n  const { activeOrganization } = useOrganization();\r\n  const router = useRouter();\r\n  const pathname = usePathname();\r\n  const [open, setOpen] = useState(false);\r\n  const [isPending, startTransition] = useTransition();\r\n\r\n  const trpc = useTRPC();\r\n  const { data: namespaces, isLoading } = useQuery(\r\n    trpc.namespace.getOrgNamespaces.queryOptions({\r\n      orgId: activeOrganization.id,\r\n    }),\r\n  );\r\n\r\n  const handleNamespaceChange = (namespace: Namespace) => {\r\n    const relativePath = pathname.replace(\r\n      `/${activeOrganization.slug}/${activeNamespace.slug}`,\r\n      `/${activeOrganization.slug}/${namespace.slug}`,\r\n    );\r\n\r\n    startTransition(() => {\r\n      router.push(relativePath);\r\n    });\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <DropdownMenu>\r\n        <DropdownMenuTrigger asChild disabled={isLoading || isPending}>\r\n          <Button\r\n            variant=\"ghost\"\r\n            className=\"focus-visible:bg-accent text-foreground h-8 px-0! focus-visible:ring-0\"\r\n          >\r\n            <span className=\"text-muted-foreground truncate text-sm font-medium\">\r\n              {activeNamespace.name}\r\n            </span>\r\n            <ChevronsUpDownIcon className=\"text-muted-foreground/80 size-3\" />\r\n          </Button>\r\n        </DropdownMenuTrigger>\r\n\r\n        <DropdownMenuContent\r\n          className=\"w-[--radix-dropdown-menu-trigger-width] min-w-56 rounded-lg\"\r\n          align=\"start\"\r\n          side=\"bottom\"\r\n          sideOffset={4}\r\n        >\r\n          {namespaces?.map((namespace) => (\r\n            <DropdownMenuItem\r\n              className=\"gap-2 p-2\"\r\n              key={namespace.id}\r\n              onClick={() => handleNamespaceChange(namespace)}\r\n            >\r\n              <p>{namespace.name}</p>\r\n            </DropdownMenuItem>\r\n          ))}\r\n\r\n          <DropdownMenuSeparator />\r\n\r\n          <DropdownMenuItem className=\"gap-2 p-2\" onClick={() => setOpen(true)}>\r\n            <PlusIcon className=\"size-4\" />\r\n\r\n            <div className=\"text-muted-foreground font-medium\">\r\n              New Namespace\r\n            </div>\r\n          </DropdownMenuItem>\r\n        </DropdownMenuContent>\r\n      </DropdownMenu>\r\n\r\n      <CreateNamespaceDialog\r\n        organization={activeOrganization}\r\n        open={open}\r\n        setOpen={setOpen}\r\n      />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default function DashboardPageWrapper({\r\n  children,\r\n  title,\r\n  titleActions,\r\n  className,\r\n  actions,\r\n}: {\r\n  children: React.ReactNode;\r\n  title: string;\r\n  titleActions?: React.ReactNode;\r\n  className?: string;\r\n  actions?: React.ReactNode;\r\n}) {\r\n  const { namespaceSlug } = useParams();\r\n\r\n  return (\r\n    <>\r\n      <header className=\"flex h-16 shrink-0 items-center justify-between px-4 transition-[width,height] ease-linear group-has-[[data-collapsible=icon]]/sidebar-wrapper:h-12 lg:px-6\">\r\n        <div className=\"flex items-center gap-2\">\r\n          <SidebarTrigger className=\"md:hidden\" />\r\n          {namespaceSlug ? (\r\n            <Breadcrumb>\r\n              <BreadcrumbList>\r\n                <BreadcrumbItem>\r\n                  <NamespaceSwitcher />\r\n                </BreadcrumbItem>\r\n                <BreadcrumbSeparator>/</BreadcrumbSeparator>\r\n                <BreadcrumbItem>\r\n                  <h1 className=\"text-foreground text-sm font-medium\">\r\n                    {title}\r\n                  </h1>\r\n                </BreadcrumbItem>\r\n              </BreadcrumbList>\r\n            </Breadcrumb>\r\n          ) : (\r\n            <h1 className=\"text-base font-medium\">{title}</h1>\r\n          )}\r\n\r\n          {titleActions}\r\n        </div>\r\n\r\n        <div className=\"flex items-center gap-2\">\r\n          {actions}\r\n          <NavUser />\r\n        </div>\r\n      </header>\r\n\r\n      <div className={cn(\"flex flex-1 flex-col px-8 py-10\", className)}>\r\n        {children}\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2046, "column": 0}, "map": {"version":3,"sources":["file:///C:/app/agentset/apps/web/src/components/chat/code-block.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { cn, CopyButton } from \"@agentset/ui\";\r\n\r\ninterface CodeBlockProps {\r\n  inline?: boolean;\r\n  className?: string;\r\n  children: string;\r\n  hasCopy?: boolean;\r\n}\r\n\r\nexport function CodeBlock({\r\n  inline = false,\r\n  className,\r\n  children,\r\n  hasCopy = true,\r\n  ...props\r\n}: CodeBlockProps) {\r\n  if (!inline) {\r\n    return (\r\n      <div className=\"not-prose group relative flex flex-col\">\r\n        {hasCopy && (\r\n          <CopyButton\r\n            textToCopy={children}\r\n            className=\"absolute top-2 right-2 opacity-0 transition-opacity group-hover:opacity-100\"\r\n          />\r\n        )}\r\n\r\n        <pre\r\n          {...props}\r\n          className={cn(\r\n            \"w-full overflow-x-auto rounded-xl border border-zinc-200 p-4 text-sm text-zinc-900 dark:border-zinc-700 dark:bg-zinc-900 dark:text-zinc-50\",\r\n\r\n            className,\r\n          )}\r\n        >\r\n          <code className=\"min-w-0 break-words [word-break:break-word] whitespace-pre-wrap\">\r\n            {children}\r\n          </code>\r\n        </pre>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <code\r\n      className={cn(\r\n        \"rounded-md bg-zinc-100 px-1 py-0.5 text-sm dark:bg-zinc-800\",\r\n        className,\r\n      )}\r\n      {...props}\r\n    >\r\n      {children}\r\n    </code>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AAAA;AAAA;AAFA;;;AAWO,SAAS,UAAU,EACxB,SAAS,KAAK,EACd,SAAS,EACT,QAAQ,EACR,UAAU,IAAI,EACd,GAAG,OACY;IACf,IAAI,CAAC,QAAQ;QACX,qBACE,8OAAC;YAAI,WAAU;;gBACZ,yBACC,8OAAC,sJAAA,CAAA,aAAU;oBACT,YAAY;oBACZ,WAAU;;;;;;8BAId,8OAAC;oBACE,GAAG,KAAK;oBACT,WAAW,CAAA,GAAA,qIAAA,CAAA,KAAE,AAAD,EACV,8IAEA;8BAGF,cAAA,8OAAC;wBAAK,WAAU;kCACb;;;;;;;;;;;;;;;;;IAKX;IAEA,qBACE,8OAAC;QACC,WAAW,CAAA,GAAA,qIAAA,CAAA,KAAE,AAAD,EACV,+DACA;QAED,GAAG,KAAK;kBAER;;;;;;AAGP","debugId":null}},
    {"offset": {"line": 2108, "column": 0}, "map": {"version":3,"sources":["file:///C:/app/agentset/apps/web/src/lib/api/ids.ts"],"sourcesContent":["const _prefixes = [\"ns_\", \"user_\", \"org_\", \"job_\", \"doc_\"] as const;\r\n\r\nexport const prefixId = (id: string, prefix: (typeof _prefixes)[number]) => {\r\n  return id.startsWith(prefix) ? id : `${prefix}${id}`;\r\n};\r\n\r\nexport const normalizeId = (id: string, prefix: (typeof _prefixes)[number]) => {\r\n  return id.startsWith(prefix) ? id.replace(prefix, \"\") : id;\r\n};\r\n"],"names":[],"mappings":";;;;AAAA,MAAM,YAAY;IAAC;IAAO;IAAS;IAAQ;IAAQ;CAAO;AAEnD,MAAM,WAAW,CAAC,IAAY;IACnC,OAAO,GAAG,UAAU,CAAC,UAAU,KAAK,GAAG,SAAS,IAAI;AACtD;AAEO,MAAM,cAAc,CAAC,IAAY;IACtC,OAAO,GAAG,UAAU,CAAC,UAAU,GAAG,OAAO,CAAC,QAAQ,MAAM;AAC1D","debugId":null}},
    {"offset": {"line": 2131, "column": 0}, "map": {"version":3,"sources":["file:///C:/app/agentset/apps/web/src/app/app.agentset.ai/%28dashboard%29/%5Bslug%5D/%5BnamespaceSlug%5D/playground/api-dialog.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { CodeBlock } from \"@/components/chat/code-block\";\r\nimport { useNamespace } from \"@/contexts/namespace-context\";\r\nimport { useOrganization } from \"@/contexts/organization-context\";\r\nimport { prefixId } from \"@/lib/api/ids\";\r\nimport { ArrowUpRightIcon, Code2Icon } from \"lucide-react\";\r\n\r\nimport {\r\n  Button,\r\n  Dialog,\r\n  DialogContent,\r\n  DialogDescription,\r\n  DialogHeader,\r\n  DialogTitle,\r\n  DialogTrigger,\r\n  Tabs,\r\n  TabsContent,\r\n  TabsList,\r\n  TabsTrigger,\r\n} from \"@agentset/ui\";\r\n\r\nexport default function ApiDialog({\r\n  variant = \"outline\",\r\n  label = \"API\",\r\n  description = \"Use the api\",\r\n  tabs,\r\n}: {\r\n  variant?: \"ghost\" | \"outline\";\r\n  label?: string;\r\n  description?: React.ReactNode;\r\n  tabs: {\r\n    title: string;\r\n    code: string;\r\n  }[];\r\n}) {\r\n  const { activeNamespace } = useNamespace();\r\n  const { activeOrganization } = useOrganization();\r\n\r\n  const prepareExample = (example: string) => {\r\n    const id = prefixId(activeNamespace.id, \"ns_\");\r\n    return example.replace(\"{{namespace}}\", id).trim();\r\n  };\r\n\r\n  return (\r\n    <Dialog>\r\n      <DialogTrigger asChild>\r\n        <Button variant={variant}>\r\n          <Code2Icon className=\"size-4\" />\r\n          {label}\r\n        </Button>\r\n      </DialogTrigger>\r\n      <DialogContent className=\"sm:max-w-2xl\">\r\n        <DialogHeader>\r\n          <DialogTitle>{label}</DialogTitle>\r\n          <DialogDescription>{description}</DialogDescription>\r\n        </DialogHeader>\r\n\r\n        <Tabs>\r\n          <div className=\"flex items-center justify-between\">\r\n            <TabsList className=\"my-3\">\r\n              {tabs.map((tab) => (\r\n                <TabsTrigger key={tab.title} value={tab.title}>\r\n                  {tab.title}\r\n                </TabsTrigger>\r\n              ))}\r\n            </TabsList>\r\n\r\n            <Button asChild size=\"sm\">\r\n              <a\r\n                href={`/${activeOrganization.slug}/settings/api-keys`}\r\n                target=\"_blank\"\r\n              >\r\n                <ArrowUpRightIcon className=\"size-4\" />\r\n                Create API Key\r\n              </a>\r\n            </Button>\r\n          </div>\r\n\r\n          {tabs.map((tab) => (\r\n            <TabsContent key={tab.title} value={tab.title}>\r\n              <CodeBlock>{prepareExample(tab.code)}</CodeBlock>\r\n            </TabsContent>\r\n          ))}\r\n        </Tabs>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA;AACA;AAAA;AAEA;AAAA;AAAA;AAAA;AARA;;;;;;;;AAsBe,SAAS,UAAU,EAChC,UAAU,SAAS,EACnB,QAAQ,KAAK,EACb,cAAc,aAAa,EAC3B,IAAI,EASL;IACC,MAAM,EAAE,eAAe,EAAE,GAAG,CAAA,GAAA,uJAAA,CAAA,eAAY,AAAD;IACvC,MAAM,EAAE,kBAAkB,EAAE,GAAG,CAAA,GAAA,0JAAA,CAAA,kBAAe,AAAD;IAE7C,MAAM,iBAAiB,CAAC;QACtB,MAAM,KAAK,CAAA,GAAA,uIAAA,CAAA,WAAQ,AAAD,EAAE,gBAAgB,EAAE,EAAE;QACxC,OAAO,QAAQ,OAAO,CAAC,iBAAiB,IAAI,IAAI;IAClD;IAEA,qBACE,8OAAC,8IAAA,CAAA,SAAM;;0BACL,8OAAC,8IAAA,CAAA,gBAAa;gBAAC,OAAO;0BACpB,cAAA,8OAAC,8IAAA,CAAA,SAAM;oBAAC,SAAS;;sCACf,8OAAC,8MAAA,CAAA,YAAS;4BAAC,WAAU;;;;;;wBACpB;;;;;;;;;;;;0BAGL,8OAAC,8IAAA,CAAA,gBAAa;gBAAC,WAAU;;kCACvB,8OAAC,8IAAA,CAAA,eAAY;;0CACX,8OAAC,8IAAA,CAAA,cAAW;0CAAE;;;;;;0CACd,8OAAC,8IAAA,CAAA,oBAAiB;0CAAE;;;;;;;;;;;;kCAGtB,8OAAC,4IAAA,CAAA,OAAI;;0CACH,8OAAC;gCAAI,WAAU;;kDACb,8OAAC,4IAAA,CAAA,WAAQ;wCAAC,WAAU;kDACjB,KAAK,GAAG,CAAC,CAAC,oBACT,8OAAC,4IAAA,CAAA,cAAW;gDAAiB,OAAO,IAAI,KAAK;0DAC1C,IAAI,KAAK;+CADM,IAAI,KAAK;;;;;;;;;;kDAM/B,8OAAC,8IAAA,CAAA,SAAM;wCAAC,OAAO;wCAAC,MAAK;kDACnB,cAAA,8OAAC;4CACC,MAAM,CAAC,CAAC,EAAE,mBAAmB,IAAI,CAAC,kBAAkB,CAAC;4CACrD,QAAO;;8DAEP,8OAAC,8NAAA,CAAA,mBAAgB;oDAAC,WAAU;;;;;;gDAAW;;;;;;;;;;;;;;;;;;4BAM5C,KAAK,GAAG,CAAC,CAAC,oBACT,8OAAC,4IAAA,CAAA,cAAW;oCAAiB,OAAO,IAAI,KAAK;8CAC3C,cAAA,8OAAC,0JAAA,CAAA,YAAS;kDAAE,eAAe,IAAI,IAAI;;;;;;mCADnB,IAAI,KAAK;;;;;;;;;;;;;;;;;;;;;;;AAQvC","debugId":null}},
    {"offset": {"line": 2302, "column": 0}, "map": {"version":3,"sources":["file:///C:/app/agentset/apps/web/src/app/app.agentset.ai/%28dashboard%29/%5Bslug%5D/%5BnamespaceSlug%5D/documents/ingest-modal/config.tsx"],"sourcesContent":["import type { UseFormReturn } from \"react-hook-form\";\nimport { useState } from \"react\";\n\nimport {\n  Accordion,\n  AccordionContent,\n  AccordionItem,\n  AccordionTrigger,\n  FormControl,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormMessage,\n  Input,\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n  Textarea,\n} from \"@agentset/ui\";\n\nexport default function IngestConfig({\n  form,\n}: {\n  form: UseFormReturn<any, any, any>;\n}) {\n  const [metadata, setMetadata] = useState<string>(\"\");\n\n  return (\n    <>\n      <Accordion type=\"single\" collapsible>\n        <AccordionItem value=\"item-1\">\n          <AccordionTrigger className=\"hover:bg-muted/70 items-center justify-start rounded-none duration-75 hover:no-underline\">\n            Chunking Settings\n          </AccordionTrigger>\n\n          <AccordionContent className=\"mt-6 flex flex-col gap-6\">\n            <FormField\n              control={form.control}\n              name=\"chunkSize\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Chunk size (optional)</FormLabel>\n                  <FormControl>\n                    <Input \n                      placeholder=\"512\" \n                      type=\"number\"\n                      value={field.value ?? \"\"}\n                      onChange={(e) => {\n                        const value = e.target.value;\n                        field.onChange(value === \"\" ? undefined : Number(value));\n                      }}\n                    />\n                  </FormControl>\n\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            <FormField\n              control={form.control}\n              name=\"chunkOverlap\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Chunk overlap (optional)</FormLabel>\n                  <FormControl>\n                    <Input \n                      placeholder=\"32\" \n                      type=\"number\"\n                      value={field.value ?? \"\"}\n                      onChange={(e) => {\n                        const value = e.target.value;\n                        field.onChange(value === \"\" ? undefined : Number(value));\n                      }}\n                    />\n                  </FormControl>\n\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            <FormField\n              control={form.control}\n              name=\"chunkingStrategy\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Chunking strategy</FormLabel>\n                  <FormControl>\n                    <Select\n                      onValueChange={field.onChange}\n                      value={field.value ?? \"basic\"}\n                    >\n                      <SelectTrigger className=\"w-full\">\n                        <SelectValue placeholder=\"Select a strategy\" />\n                      </SelectTrigger>\n\n                      <SelectContent>\n                        <SelectItem value=\"basic\">Basic</SelectItem>\n                        <SelectItem value=\"by_title\">By title</SelectItem>\n                      </SelectContent>\n                    </Select>\n                  </FormControl>\n\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            <FormField\n              control={form.control}\n              name=\"strategy\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Strategy</FormLabel>\n                  <FormControl>\n                    <Select\n                      onValueChange={field.onChange}\n                      value={field.value ?? \"auto\"}\n                    >\n                      <SelectTrigger className=\"w-full\">\n                        <SelectValue placeholder=\"Select a strategy\" />\n                      </SelectTrigger>\n\n                      <SelectContent>\n                        <SelectItem value=\"auto\">Auto</SelectItem>\n                        <SelectItem value=\"fast\">Fast</SelectItem>\n                        <SelectItem value=\"hi_res\">Hi-res</SelectItem>\n                        <SelectItem value=\"ocr_only\">OCR only</SelectItem>\n                      </SelectContent>\n                    </Select>\n                  </FormControl>\n\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            <FormField\n              control={form.control}\n              name=\"metadata\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Metadata JSON (optional)</FormLabel>\n                  <FormControl>\n                    <Textarea\n                      value={metadata}\n                      onChange={(e) => {\n                        const str = e.target.value;\n                        setMetadata(str);\n                        if (str === \"\") {\n                          field.onChange(undefined);\n                          return;\n                        }\n\n                        try {\n                          field.onChange(JSON.parse(str));\n                        } catch (error) {\n                          field.onChange(\"\");\n                        }\n                      }}\n                      placeholder='{ \"foo\": \"bar\" }'\n                      className=\"h-24\"\n                    />\n                  </FormControl>\n\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n          </AccordionContent>\n        </AccordionItem>\n      </Accordion>\n    </>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2691, "column": 0}, "map": {"version":3,"sources":["file:///C:/app/agentset/apps/web/src/app/app.agentset.ai/%28dashboard%29/%5Bslug%5D/%5BnamespaceSlug%5D/documents/ingest-modal/text-form.tsx"],"sourcesContent":["import { useNamespace } from \"@/contexts/namespace-context\";\r\nimport { useTRPC } from \"@/trpc/react\";\r\nimport { zodResolver } from \"@hookform/resolvers/zod\";\r\nimport { useMutation } from \"@tanstack/react-query\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { z } from \"zod\";\r\n\r\nimport {\r\n  Button,\r\n  DialogFooter,\r\n  Form,\r\n  FormControl,\r\n  FormField,\r\n  FormItem,\r\n  FormLabel,\r\n  FormMessage,\r\n  Input,\r\n  Textarea,\r\n} from \"@agentset/ui\";\r\nimport { configSchema } from \"@agentset/validation\";\r\n\r\nimport IngestConfig from \"./config\";\r\n\r\nconst schema = z\r\n  .object({\r\n    name: z.string().optional(),\r\n    text: z.string().min(10, \"Text must be at least 10 characters\"),\r\n  })\r\n  .merge(configSchema);\r\n\r\nexport default function TextForm({ onSuccess }: { onSuccess: () => void }) {\r\n  const { activeNamespace } = useNamespace();\r\n  const trpc = useTRPC();\r\n\r\n  const form = useForm<z.infer<typeof schema>>({\r\n    resolver: zodResolver(schema),\r\n  });\r\n\r\n  const { mutateAsync, isPending } = useMutation(\r\n    trpc.ingestJob.ingest.mutationOptions({\r\n      onSuccess,\r\n    }),\r\n  );\r\n\r\n  const handleTextSubmit = async (data: z.infer<typeof schema>) => {\r\n    await mutateAsync({\r\n      namespaceId: activeNamespace.id,\r\n      payload: {\r\n        type: \"TEXT\",\r\n        name: data.name,\r\n        text: data.text,\r\n      },\r\n      config:\r\n        data.chunkSize || data.chunkOverlap || data.metadata\r\n          ? {\r\n              chunkSize: data.chunkSize,\r\n              chunkOverlap: data.chunkOverlap,\r\n              metadata: data.metadata,\r\n            }\r\n          : undefined,\r\n    });\r\n  };\r\n\r\n  return (\r\n    <Form {...form}>\r\n      <form onSubmit={form.handleSubmit(handleTextSubmit)}>\r\n        <div className=\"flex flex-col gap-6 py-4\">\r\n          <FormField\r\n            control={form.control}\r\n            name=\"name\"\r\n            render={({ field }) => (\r\n              <FormItem>\r\n                <FormLabel>Name</FormLabel>\r\n                <FormControl>\r\n                  <Input placeholder=\"example.txt\" {...field} />\r\n                </FormControl>\r\n\r\n                <FormMessage />\r\n              </FormItem>\r\n            )}\r\n          />\r\n\r\n          <FormField\r\n            control={form.control}\r\n            name=\"text\"\r\n            render={({ field }) => (\r\n              <FormItem>\r\n                <FormLabel>Text</FormLabel>\r\n                <FormControl>\r\n                  <Textarea\r\n                    id=\"text\"\r\n                    placeholder=\"Enter your text here\"\r\n                    className=\"max-h-[400px] min-h-[200px]\"\r\n                    {...field}\r\n                  />\r\n                </FormControl>\r\n\r\n                <FormMessage />\r\n              </FormItem>\r\n            )}\r\n          />\r\n\r\n          <IngestConfig form={form} />\r\n        </div>\r\n\r\n        <DialogFooter>\r\n          <Button type=\"submit\" isLoading={isPending}>\r\n            Ingest Text\r\n          </Button>\r\n        </DialogFooter>\r\n      </form>\r\n    </Form>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAYA;AAAA;AAEA;;;;;;;;;;;AAEA,MAAM,SAAS,oIAAA,CAAA,IAAC,CACb,MAAM,CAAC;IACN,MAAM,oIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ;IACzB,MAAM,oIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,GAAG,CAAC,IAAI;AAC3B,GACC,KAAK,CAAC,2JAAA,CAAA,eAAY;AAEN,SAAS,SAAS,EAAE,SAAS,EAA6B;IACvE,MAAM,EAAE,eAAe,EAAE,GAAG,CAAA,GAAA,uJAAA,CAAA,eAAY,AAAD;IACvC,MAAM,OAAO,CAAA,GAAA,oIAAA,CAAA,UAAO,AAAD;IAEnB,MAAM,OAAO,CAAA,GAAA,8JAAA,CAAA,UAAO,AAAD,EAA0B;QAC3C,UAAU,CAAA,GAAA,8JAAA,CAAA,cAAW,AAAD,EAAE;IACxB;IAEA,MAAM,EAAE,WAAW,EAAE,SAAS,EAAE,GAAG,CAAA,GAAA,8KAAA,CAAA,cAAW,AAAD,EAC3C,KAAK,SAAS,CAAC,MAAM,CAAC,eAAe,CAAC;QACpC;IACF;IAGF,MAAM,mBAAmB,OAAO;QAC9B,MAAM,YAAY;YAChB,aAAa,gBAAgB,EAAE;YAC/B,SAAS;gBACP,MAAM;gBACN,MAAM,KAAK,IAAI;gBACf,MAAM,KAAK,IAAI;YACjB;YACA,QACE,KAAK,SAAS,IAAI,KAAK,YAAY,IAAI,KAAK,QAAQ,GAChD;gBACE,WAAW,KAAK,SAAS;gBACzB,cAAc,KAAK,YAAY;gBAC/B,UAAU,KAAK,QAAQ;YACzB,IACA;QACR;IACF;IAEA,qBACE,8OAAC,4IAAA,CAAA,OAAI;QAAE,GAAG,IAAI;kBACZ,cAAA,8OAAC;YAAK,UAAU,KAAK,YAAY,CAAC;;8BAChC,8OAAC;oBAAI,WAAU;;sCACb,8OAAC,4IAAA,CAAA,YAAS;4BACR,SAAS,KAAK,OAAO;4BACrB,MAAK;4BACL,QAAQ,CAAC,EAAE,KAAK,EAAE,iBAChB,8OAAC,4IAAA,CAAA,WAAQ;;sDACP,8OAAC,4IAAA,CAAA,YAAS;sDAAC;;;;;;sDACX,8OAAC,4IAAA,CAAA,cAAW;sDACV,cAAA,8OAAC,6IAAA,CAAA,QAAK;gDAAC,aAAY;gDAAe,GAAG,KAAK;;;;;;;;;;;sDAG5C,8OAAC,4IAAA,CAAA,cAAW;;;;;;;;;;;;;;;;sCAKlB,8OAAC,4IAAA,CAAA,YAAS;4BACR,SAAS,KAAK,OAAO;4BACrB,MAAK;4BACL,QAAQ,CAAC,EAAE,KAAK,EAAE,iBAChB,8OAAC,4IAAA,CAAA,WAAQ;;sDACP,8OAAC,4IAAA,CAAA,YAAS;sDAAC;;;;;;sDACX,8OAAC,4IAAA,CAAA,cAAW;sDACV,cAAA,8OAAC,gJAAA,CAAA,WAAQ;gDACP,IAAG;gDACH,aAAY;gDACZ,WAAU;gDACT,GAAG,KAAK;;;;;;;;;;;sDAIb,8OAAC,4IAAA,CAAA,cAAW;;;;;;;;;;;;;;;;sCAKlB,8OAAC,+OAAA,CAAA,UAAY;4BAAC,MAAM;;;;;;;;;;;;8BAGtB,8OAAC,8IAAA,CAAA,eAAY;8BACX,cAAA,8OAAC,8IAAA,CAAA,SAAM;wBAAC,MAAK;wBAAS,WAAW;kCAAW;;;;;;;;;;;;;;;;;;;;;;AAOtD","debugId":null}},
    {"offset": {"line": 2888, "column": 0}, "map": {"version":3,"sources":["file:///C:/app/agentset/apps/web/src/hooks/use-upload.ts"],"sourcesContent":["import { useState } from \"react\";\nimport { useTRPC } from \"@/trpc/react\";\nimport { useMutation } from \"@tanstack/react-query\";\nimport { toast } from \"sonner\";\n\nconst uploadWithProgress = (\n  url: string,\n  file: File,\n  {\n    onProgress,\n  }: {\n    onProgress: (percent: number) => void;\n  },\n) => {\n  return new Promise<void>((resolve, reject) => {\n    const formData = new FormData();\n    formData.append(\"files\", file);\n\n    const xhr = new XMLHttpRequest();\n    xhr.open(\"POST\", url);\n\n    // Track upload progress\n    xhr.upload.addEventListener(\"progress\", (event) => {\n      if (event.lengthComputable) {\n        const percentCompleted = Math.round((event.loaded * 100) / event.total);\n        onProgress(percentCompleted);\n      }\n    });\n\n    xhr.onload = () => {\n      if (xhr.status >= 200 && xhr.status < 300) {\n        resolve();\n      } else {\n        reject(new Error(`Upload failed: ${xhr.responseText}`));\n      }\n    };\n\n    xhr.onerror = () => {\n      reject(new Error(\"Error during upload.\"));\n    };\n\n    xhr.send(formData);\n  });\n};\n\nexport function useUploadFiles({ namespaceId }: { namespaceId: string }) {\n  const trpc = useTRPC();\n  const { mutateAsync: getPresignedUrls } = useMutation(\n    trpc.upload.getPresignedUrls.mutationOptions(),\n  );\n\n  const [uploadedFiles, setUploadedFiles] = useState<\n    { key: string; name: string }[]\n  >([]);\n\n  const [progresses, setProgresses] = useState<Record<string, number>>({});\n  const [isUploading, setIsUploading] = useState(false);\n\n  async function onUpload(files: File[]) {\n    setIsUploading(true);\n    const newEntries: { name: string; key: string }[] = [];\n\n    try {\n      const presignResponses = await getPresignedUrls({\n        namespaceId,\n        files: files.map((file) => ({\n          fileName: file.name,\n          contentType: file.type,\n          fileSize: file.size,\n        })),\n      });\n\n      const uploadPromises = presignResponses.map(async (presignResponse, i) => {\n        const file = files[i]!;\n\n        try {\n          await uploadWithProgress(presignResponse.url, file, {\n            onProgress: (percent) => {\n              setProgresses((prev) => ({ ...prev, [file.name]: percent }));\n            },\n          });\n\n          const newEntry = { name: file.name, key: presignResponse.key };\n          newEntries.push(newEntry);\n          setUploadedFiles((prev) => [...prev, newEntry]);\n          \n          return newEntry;\n        } catch (error) {\n          console.error(`Failed to upload ${file.name}:`, error);\n          toast.error(`Failed to upload ${file.name}!`);\n          throw error;\n        }\n      });\n\n      await Promise.all(uploadPromises);\n      \n      if (newEntries.length > 0) {\n        toast.success(`Successfully uploaded ${newEntries.length} file(s)!`);\n      }\n    } catch (error) {\n      console.error(\"Upload error:\", error);\n      if (error instanceof Error) {\n        toast.error(`Upload failed: ${error.message}`);\n      } else {\n        toast.error(\"Failed to upload files! Please try again.\");\n      }\n    } finally {\n      setProgresses({});\n      setIsUploading(false);\n    }\n\n    return newEntries;\n  }\n\n  return {\n    onUpload,\n    uploadedFiles,\n    progresses,\n    isUploading,\n  };\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 3000, "column": 0}, "map": {"version":3,"sources":["file:///C:/app/agentset/apps/web/src/lib/upload.ts"],"sourcesContent":["export const MAX_UPLOAD_SIZE = 200 * 1024 * 1024; // 200MB\r\n"],"names":[],"mappings":";;;AAAO,MAAM,kBAAkB,MAAM,OAAO,MAAM,QAAQ","debugId":null}},
    {"offset": {"line": 3010, "column": 0}, "map": {"version":3,"sources":["file:///C:/app/agentset/apps/web/src/app/app.agentset.ai/%28dashboard%29/%5Bslug%5D/%5BnamespaceSlug%5D/documents/ingest-modal/upload-form.tsx"],"sourcesContent":["import { useEffect } from \"react\";\nimport { useNamespace } from \"@/contexts/namespace-context\";\nimport { useUploadFiles } from \"@/hooks/use-upload\";\nimport { MAX_UPLOAD_SIZE } from \"@/lib/upload\";\nimport { useTRPC } from \"@/trpc/react\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { useMutation } from \"@tanstack/react-query\";\nimport { useForm } from \"react-hook-form\";\nimport { z } from \"zod\";\n\nimport {\n  Button,\n  DialogFooter,\n  FileUploader,\n  Form,\n  FormControl,\n  FormDescription,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormMessage,\n  Input,\n} from \"@agentset/ui\";\nimport { configSchema } from \"@agentset/validation\";\n\nimport IngestConfig from \"./config\";\n\nconst schema = z\n  .object({\n    name: z.string().optional(),\n    files: z\n      .array(z.instanceof(File))\n      .min(1, { message: \"File is required\" })\n      .max(100, { message: \"Maximum 100 files\" }),\n  })\n  .merge(configSchema);\n\nexport default function UploadForm({ onSuccess }: { onSuccess: () => void }) {\n  const { activeNamespace } = useNamespace();\n  const trpc = useTRPC();\n\n  const form = useForm<z.infer<typeof schema>>({\n    resolver: zodResolver(schema),\n    defaultValues: {\n      name: \"\",\n      files: [],\n      chunkSize: undefined,\n      chunkOverlap: undefined,\n      metadata: undefined,\n      chunkingStrategy: \"basic\",\n      strategy: \"auto\",\n    },\n  });\n\n  const files = form.watch(\"files\");\n  const { setValue } = form;\n  useEffect(() => {\n    // if it's a single file, set the name to the file name\n    if (files.length === 1 && files[0]?.name) {\n      setValue(\"name\", files[0].name);\n    }\n  }, [files, setValue]);\n\n  const { onUpload, progresses, isUploading, uploadedFiles } = useUploadFiles({\n    namespaceId: activeNamespace.id,\n  });\n\n  const { mutateAsync, isPending: isFilePending } = useMutation(\n    trpc.ingestJob.ingest.mutationOptions({\n      onSuccess: () => {\n        form.reset();\n        onSuccess();\n      },\n    }),\n  );\n\n  const handleFileSubmit = async (data: z.infer<typeof schema>) => {\n    try {\n      const uploadedFiles = await onUpload(data.files);\n      if (uploadedFiles.length === 0) {\n        throw new Error(\"Nenhum arquivo foi enviado com sucesso\");\n      }\n\n      await mutateAsync({\n        namespaceId: activeNamespace.id,\n        payload: {\n          type: \"MANAGED_FILES\",\n          name: data.name,\n          files: uploadedFiles,\n        },\n        config:\n          data.chunkSize || data.chunkOverlap || data.metadata\n            ? {\n                chunkSize: data.chunkSize,\n                chunkOverlap: data.chunkOverlap,\n                metadata: data.metadata,\n                chunkingStrategy: data.chunkingStrategy,\n                strategy: data.strategy,\n              }\n            : undefined,\n      });\n    } catch (error) {\n      console.error(\"Erro no envio:\", error);\n      // O erro j  tratado no hook useUploadFiles\n    }\n  };\n\n  const isPending = isFilePending || isUploading;\n  const hasProgress = Object.keys(progresses).length > 0;\n\n  return (\n    <Form {...form}>\n      <form onSubmit={form.handleSubmit(handleFileSubmit)}>\n        <div className=\"flex flex-col gap-6 py-4\">\n          <FormField\n            control={form.control}\n            name=\"name\"\n            render={({ field }) => (\n              <FormItem>\n                <FormLabel>Name (optional)</FormLabel>\n                <FormControl>\n                  <Input placeholder=\"2025 Reports\" {...field} />\n                </FormControl>\n\n                <FormDescription>A name for this batch</FormDescription>\n                <FormMessage />\n              </FormItem>\n            )}\n          />\n\n          <FormField\n            control={form.control}\n            name=\"files\"\n            render={({ field }) => (\n              <FormItem>\n                <FormLabel>Files</FormLabel>\n                <FormControl>\n                  <FileUploader\n                    value={field.value}\n                    onValueChange={field.onChange}\n                    maxFileCount={100}\n                    multiple\n                    maxSize={MAX_UPLOAD_SIZE}\n                    progresses={progresses}\n                    accept={{}}\n                    disabled={isPending}\n                  />\n                </FormControl>\n\n                <FormMessage />\n              </FormItem>\n            )}\n          />\n\n          <IngestConfig form={form} />\n        </div>\n\n        <DialogFooter>\n          <Button type=\"submit\" isLoading={isPending} disabled={isPending}>\n            {isUploading && hasProgress\n              ? `Enviando... ${Math.round(\n                  Object.values(progresses).reduce((a, b) => a + b, 0) /\n                    Object.keys(progresses).length\n                )}%`\n              : isFilePending\n              ? \"Processando...\"\n              : \"Ingest Files\"}\n          </Button>\n        </DialogFooter>\n      </form>\n    </Form>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 3268, "column": 0}, "map": {"version":3,"sources":["file:///C:/app/agentset/apps/web/src/app/app.agentset.ai/%28dashboard%29/%5Bslug%5D/%5BnamespaceSlug%5D/documents/ingest-modal/urls-form.tsx"],"sourcesContent":["import { useNamespace } from \"@/contexts/namespace-context\";\nimport { useTRPC } from \"@/trpc/react\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { useMutation } from \"@tanstack/react-query\";\nimport { Trash2Icon } from \"lucide-react\";\nimport { useForm } from \"react-hook-form\";\nimport { z } from \"zod\";\n\nimport {\n  Button,\n  DialogFooter,\n  Form,\n  FormControl,\n  FormDescription,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormMessage,\n  Input,\n} from \"@agentset/ui\";\nimport { configSchema } from \"@agentset/validation\";\n\nimport IngestConfig from \"./config\";\n\nconst schema = z\n  .object({\n    name: z.string().optional(),\n    urls: z\n      .array(z.string().url(\"Please enter a valid URL\"))\n      .min(1, \"Add at least one URL\"),\n  })\n  .merge(configSchema);\n\nexport default function UrlsForm({ onSuccess }: { onSuccess: () => void }) {\n  const { activeNamespace } = useNamespace();\n  const trpc = useTRPC();\n\n  const form = useForm<z.infer<typeof schema>>({\n    resolver: zodResolver(schema),\n    defaultValues: {\n      name: \"\",\n      urls: [\"\"],\n      chunkSize: undefined,\n      chunkOverlap: undefined,\n      metadata: undefined,\n      chunkingStrategy: \"basic\",\n      strategy: \"auto\",\n    },\n  });\n\n  const { mutateAsync, isPending } = useMutation(\n    trpc.ingestJob.ingest.mutationOptions({\n      onSuccess,\n    }),\n  );\n\n  const handleUrlsSubmit = async (data: z.infer<typeof schema>) => {\n    await mutateAsync({\n      namespaceId: activeNamespace.id,\n      payload: {\n        type: \"URLS\",\n        urls: data.urls,\n        name: data.name,\n      },\n      config:\n        data.chunkSize || data.chunkOverlap || data.metadata\n          ? {\n              chunkSize: data.chunkSize,\n              chunkOverlap: data.chunkOverlap,\n              metadata: data.metadata,\n            }\n          : undefined,\n    });\n  };\n\n  const addUrlField = () => {\n    const urls = form.getValues(\"urls\");\n    form.setValue(\"urls\", [...urls, \"\"]);\n  };\n\n  const removeUrlField = (index: number) => {\n    const urls = form.getValues(\"urls\");\n    if (urls.length > 1) {\n      form.setValue(\n        \"urls\",\n        urls.filter((_, i) => i !== index),\n      );\n    }\n  };\n\n  return (\n    <Form {...form}>\n      <form onSubmit={form.handleSubmit(handleUrlsSubmit)}>\n        <div className=\"flex flex-col gap-6 py-4\">\n          <FormField\n            control={form.control}\n            name=\"name\"\n            render={({ field }) => (\n              <FormItem>\n                <FormLabel>Name (optional)</FormLabel>\n                <FormControl>\n                  <Input placeholder=\"2025 Reports\" {...field} />\n                </FormControl>\n\n                <FormDescription>A name for this batch</FormDescription>\n                <FormMessage />\n              </FormItem>\n            )}\n          />\n\n          <div className=\"flex flex-col gap-1\">\n            {form.watch(\"urls\").map((_, index) => (\n              <div key={index} className=\"flex items-end gap-2\">\n                <div className=\"flex-1\">\n                  <FormField\n                    control={form.control}\n                    name={`urls.${index}`}\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>{index === 0 ? \"URLs\" : \"\"}</FormLabel>\n                        <FormControl>\n                          <Input\n                            type=\"url\"\n                            placeholder=\"https://example.com\"\n                            {...field}\n                          />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n                </div>\n\n                {form.watch(\"urls\").length > 1 && (\n                  <Button\n                    type=\"button\"\n                    variant=\"ghost\"\n                    size=\"icon\"\n                    onClick={() => removeUrlField(index)}\n                  >\n                    <Trash2Icon className=\"h-4 w-4\" />\n                  </Button>\n                )}\n              </div>\n            ))}\n\n            <Button\n              type=\"button\"\n              variant=\"ghost\"\n              className=\"mt-4 w-fit\"\n              onClick={addUrlField}\n            >\n              Add URL\n            </Button>\n          </div>\n\n          <IngestConfig form={form} />\n        </div>\n\n        <DialogFooter>\n          <Button type=\"submit\" isLoading={isPending}>\n            Ingest URLs\n          </Button>\n        </DialogFooter>\n      </form>\n    </Form>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 3549, "column": 0}, "map": {"version":3,"sources":["file:///C:/app/agentset/apps/web/src/app/app.agentset.ai/%28dashboard%29/%5Bslug%5D/%5BnamespaceSlug%5D/documents/ingest-modal/index.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport { useNamespace } from \"@/contexts/namespace-context\";\r\nimport { useOrganization } from \"@/contexts/organization-context\";\r\nimport { isProPlan } from \"@/lib/plans\";\r\nimport { useTRPC } from \"@/trpc/react\";\r\nimport { useQueryClient } from \"@tanstack/react-query\";\r\nimport { PlusIcon } from \"lucide-react\";\r\nimport { toast } from \"sonner\";\r\n\r\nimport {\r\n  Button,\r\n  Dialog,\r\n  DialogContent,\r\n  DialogHeader,\r\n  DialogTitle,\r\n  DialogTrigger,\r\n  Tabs,\r\n  TabsContent,\r\n  TabsList,\r\n  TabsTrigger,\r\n  Tooltip,\r\n  TooltipContent,\r\n  TooltipTrigger,\r\n} from \"@agentset/ui\";\r\n\r\nimport TextForm from \"./text-form\";\r\nimport UploadForm from \"./upload-form\";\r\nimport UrlsForm from \"./urls-form\";\r\n\r\nexport function IngestModal() {\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const trpc = useTRPC();\r\n  const queryClient = useQueryClient();\r\n  const { activeOrganization } = useOrganization();\r\n  const { activeNamespace } = useNamespace();\r\n\r\n  const onSuccess = () => {\r\n    setIsOpen(false);\r\n    void queryClient.invalidateQueries(\r\n      trpc.ingestJob.all.queryFilter({ namespaceId: activeNamespace.id }),\r\n    );\r\n  };\r\n\r\n  const onTextSuccess = () => {\r\n    onSuccess();\r\n    toast.success(\"Text ingestion job created\");\r\n  };\r\n\r\n  const onUploadSuccess = () => {\r\n    onSuccess();\r\n    toast.success(\"Upload ingestion job created\");\r\n  };\r\n\r\n  const onUrlSuccess = () => {\r\n    onSuccess();\r\n    toast.success(\"URL ingestion job created\");\r\n  };\r\n\r\n  const isPending =\r\n    queryClient.isMutating(trpc.ingestJob.ingest.mutationOptions()) > 0;\r\n\r\n  // if it's not a pro plan, check if the user has exceeded the limit\r\n  // pro plan is unlimited with usage based billing\r\n  const isOverLimit =\r\n    !isProPlan(activeOrganization.plan) &&\r\n    activeOrganization.totalPages >= activeOrganization.pagesLimit;\r\n\r\n  return (\r\n    <Dialog\r\n      open={isOpen}\r\n      onOpenChange={(newOpen) => {\r\n        if (isPending) return;\r\n        if (newOpen && isOverLimit) return;\r\n        setIsOpen(newOpen);\r\n      }}\r\n    >\r\n      <div>\r\n        <DialogTrigger asChild>\r\n          {isOverLimit ? (\r\n            <Tooltip>\r\n              <TooltipTrigger asChild>\r\n                <span>\r\n                  <Button disabled>\r\n                    <PlusIcon className=\"h-4 w-4\" /> Ingest\r\n                  </Button>\r\n                </span>\r\n              </TooltipTrigger>\r\n              <TooltipContent>\r\n                <p>You've reached your plan's limits. Upgrade to ingest more</p>\r\n              </TooltipContent>\r\n            </Tooltip>\r\n          ) : (\r\n            <Button>\r\n              <PlusIcon className=\"h-4 w-4\" /> Ingest\r\n            </Button>\r\n          )}\r\n        </DialogTrigger>\r\n      </div>\r\n\r\n      <DialogContent className=\"sm:max-w-2xl\" scrollableOverlay>\r\n        <DialogHeader>\r\n          <DialogTitle>Ingest Content</DialogTitle>\r\n        </DialogHeader>\r\n\r\n        <Tabs defaultValue=\"text\" className=\"w-full\">\r\n          <TabsList className=\"w-full\">\r\n            <TabsTrigger value=\"text\" className=\"flex-1\">\r\n              Text\r\n            </TabsTrigger>\r\n            <TabsTrigger value=\"upload\" className=\"flex-1\">\r\n              Upload\r\n            </TabsTrigger>\r\n            <TabsTrigger value=\"urls\" className=\"flex-1\">\r\n              URLs\r\n            </TabsTrigger>\r\n          </TabsList>\r\n\r\n          <TabsContent value=\"text\">\r\n            <TextForm onSuccess={onTextSuccess} />\r\n          </TabsContent>\r\n\r\n          <TabsContent value=\"upload\">\r\n            <UploadForm onSuccess={onUploadSuccess} />\r\n          </TabsContent>\r\n\r\n          <TabsContent value=\"urls\">\r\n            <UrlsForm onSuccess={onUrlSuccess} />\r\n          </TabsContent>\r\n        </Tabs>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 3830, "column": 0}, "map": {"version":3,"sources":["file:///C:/app/agentset/packages/db/src/client.ts"],"sourcesContent":["import { neonConfig } from \"@neondatabase/serverless\";\r\nimport { PrismaNeon } from \"@prisma/adapter-neon\";\r\nimport { PrismaClient } from \"@prisma/client\";\r\n\r\nconst createPrismaClient = () => {\r\n  // Supabase pooled connection string (must use Supavisor)\r\n  const connectionString = process.env.DATABASE_URL ?? \"\";\r\n\r\n  if (connectionString.includes(\"@localhost\")) {\r\n    // Disable SSL for local connections\r\n    neonConfig.useSecureWebSocket = false;\r\n    // WebSocket proxy is hosted on `4000` locally, so add port. Does not work in production.\r\n    neonConfig.wsProxy = (host) => `${host}:4000/v2`;\r\n  }\r\n\r\n  // Only Neon hosts support this -- non-deterministic errors otherwise\r\n  neonConfig.pipelineConnect = false;\r\n\r\n  // So it can also work in Node.js\r\n  neonConfig.webSocketConstructor = WebSocket;\r\n\r\n  const adapter = new PrismaNeon({ connectionString });\r\n  return new PrismaClient({\r\n    adapter,\r\n    log:\r\n      process.env.NODE_ENV === \"development\"\r\n        ? [\"query\", \"error\", \"warn\"]\r\n        : [\"error\"],\r\n  });\r\n};\r\n\r\nconst globalForPrisma = globalThis as unknown as {\r\n  prisma: ReturnType<typeof createPrismaClient> | undefined;\r\n};\r\n\r\nexport const db = globalForPrisma.prisma ?? createPrismaClient();\r\n\r\nif (process.env.NODE_ENV !== \"production\") globalForPrisma.prisma = db;\r\n"],"names":[],"mappings":";;;AAAA;AACA;AACA;;;;AAEA,MAAM,qBAAqB;IACzB,yDAAyD;IACzD,MAAM,mBAAmB,QAAQ,GAAG,CAAC,YAAY,IAAI;IAErD,IAAI,iBAAiB,QAAQ,CAAC,eAAe;QAC3C,oCAAoC;QACpC,sJAAA,CAAA,aAAU,CAAC,kBAAkB,GAAG;QAChC,yFAAyF;QACzF,sJAAA,CAAA,aAAU,CAAC,OAAO,GAAG,CAAC,OAAS,GAAG,KAAK,QAAQ,CAAC;IAClD;IAEA,qEAAqE;IACrE,sJAAA,CAAA,aAAU,CAAC,eAAe,GAAG;IAE7B,iCAAiC;IACjC,sJAAA,CAAA,aAAU,CAAC,oBAAoB,GAAG;IAElC,MAAM,UAAU,IAAI,6JAAA,CAAA,aAAU,CAAC;QAAE;IAAiB;IAClD,OAAO,IAAI,6HAAA,CAAA,eAAY,CAAC;QACtB;QACA,KACE,uCACI;YAAC;YAAS;YAAS;SAAO;IAElC;AACF;AAEA,MAAM,kBAAkB;AAIjB,MAAM,KAAK,gBAAgB,MAAM,IAAI;AAE5C,wCAA2C,gBAAgB,MAAM,GAAG","debugId":null}},
    {"offset": {"line": 3873, "column": 0}, "map": {"version":3,"sources":["file:///C:/app/agentset/packages/db/src/types/prisma.ts"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-namespace */\r\nimport type {\r\n  DocumentPayload as _DocumentPayload,\r\n  DocumentProperties as _DocumentProperties,\r\n  IngestJobConfig as _IngestJobConfig,\r\n  IngestJobPayload as _IngestJobPayload,\r\n  EmbeddingConfig,\r\n  VectorStoreConfig,\r\n} from \"@agentset/validation\";\r\n\r\ntype OpenAILanguageModel = \"gpt-4o\" | \"gpt-4o-mini\";\r\n\r\nexport type LLMConfig =\r\n  | {\r\n      provider: \"OPENAI\";\r\n      model: OpenAILanguageModel;\r\n      apiKey: string;\r\n    }\r\n  | {\r\n      provider: \"AZURE_OPENAI\";\r\n      model: OpenAILanguageModel;\r\n      baseUrl: string;\r\n      deployment: string;\r\n      apiKey: string;\r\n      apiVersion?: string;\r\n    };\r\n\r\ndeclare global {\r\n  export namespace PrismaJson {\r\n    type ConnectionConfig = {\r\n      authType: \"OAUTH2\";\r\n      credentials: {\r\n        accessToken: string;\r\n        refreshToken: string | null;\r\n      };\r\n    };\r\n\r\n    type IngestJobPayload = _IngestJobPayload;\r\n    type IngestJobConfig = _IngestJobConfig;\r\n    type NamespaceVectorStoreConfig = VectorStoreConfig;\r\n\r\n    type NamespaceFileStoreConfig = {\r\n      provider: \"S3\";\r\n      bucket: string;\r\n      accessKeyId: string;\r\n      secretAccessKey: string;\r\n      endpoint: string;\r\n      region: string;\r\n      prefix?: string;\r\n    };\r\n\r\n    type NamespaceEmbeddingConfig = EmbeddingConfig;\r\n    type NamespaceLLMConfig = LLMConfig;\r\n    type DocumentProperties = _DocumentProperties;\r\n\r\n    type DocumentSource = _DocumentPayload;\r\n    type DocumentMetadata = Record<string, unknown>;\r\n  }\r\n}\r\n"],"names":[],"mappings":"AAAA,kDAAkD","debugId":null}},
    {"offset": {"line": 3881, "column": 0}, "map": {"version":3,"sources":["file:///C:/app/agentset/packages/db/src/index.ts"],"sourcesContent":["export { db } from \"./client\";\r\nexport * from \"@prisma/client\";\r\n\r\nexport * from \"./types/prisma\";\r\n"],"names":[],"mappings":";AAAA;AACA;AAEA","debugId":null}},
    {"offset": {"line": 3905, "column": 0}, "map": {"version":3,"sources":["file:///C:/app/agentset/apps/web/src/app/app.agentset.ai/%28dashboard%29/%5Bslug%5D/%5BnamespaceSlug%5D/documents/actions.tsx"],"sourcesContent":["import type { Row } from \"@tanstack/react-table\";\r\nimport { useNamespace } from \"@/contexts/namespace-context\";\r\nimport { prefixId } from \"@/lib/api/ids\";\r\nimport { useTRPC } from \"@/trpc/react\";\r\nimport { useMutation, useQueryClient } from \"@tanstack/react-query\";\r\nimport {\r\n  CopyIcon,\r\n  EllipsisVerticalIcon,\r\n  RefreshCwIcon,\r\n  Trash2Icon,\r\n} from \"lucide-react\";\r\nimport { toast } from \"sonner\";\r\n\r\nimport { IngestJobStatus } from \"@agentset/db\";\r\nimport {\r\n  Button,\r\n  DropdownMenu,\r\n  DropdownMenuContent,\r\n  DropdownMenuItem,\r\n  DropdownMenuTrigger,\r\n} from \"@agentset/ui\";\r\n\r\nimport type { JobCol } from \"./columns\";\r\n\r\nexport function JobActions({ row }: { row: Row<JobCol> }) {\r\n  const queryClient = useQueryClient();\r\n  const { activeNamespace } = useNamespace();\r\n  const trpc = useTRPC();\r\n  const { mutate: deleteJob, isPending: isDeletePending } = useMutation(\r\n    trpc.ingestJob.delete.mutationOptions({\r\n      onSuccess: () => {\r\n        toast.success(\"Job deleted successfully\");\r\n        void queryClient.invalidateQueries(\r\n          trpc.ingestJob.all.queryFilter({\r\n            namespaceId: activeNamespace.id,\r\n          }),\r\n        );\r\n      },\r\n      onError: (error) => {\r\n        toast.error(error.message);\r\n      },\r\n    }),\r\n  );\r\n\r\n  const { mutate: reIngestJob, isPending: isReIngestPending } = useMutation(\r\n    trpc.ingestJob.reIngest.mutationOptions({\r\n      onSuccess: () => {\r\n        toast.success(\"Job re-ingestion started\");\r\n        void queryClient.invalidateQueries(\r\n          trpc.ingestJob.all.queryFilter({\r\n            namespaceId: activeNamespace.id,\r\n          }),\r\n        );\r\n      },\r\n      onError: (error) => {\r\n        toast.error(error.message);\r\n      },\r\n    }),\r\n  );\r\n\r\n  const handleCopy = async () => {\r\n    await navigator.clipboard.writeText(prefixId(row.original.id, \"job_\"));\r\n    toast.success(\"Copied ID\");\r\n  };\r\n\r\n  const handleDelete = () => {\r\n    deleteJob({\r\n      namespaceId: activeNamespace.id,\r\n      jobId: row.original.id,\r\n    });\r\n  };\r\n\r\n  const handleReIngest = () => {\r\n    reIngestJob({\r\n      namespaceId: activeNamespace.id,\r\n      jobId: row.original.id,\r\n    });\r\n  };\r\n\r\n  const isDeleteDisabled =\r\n    isDeletePending ||\r\n    isReIngestPending ||\r\n    row.original.status === IngestJobStatus.DELETING ||\r\n    row.original.status === IngestJobStatus.QUEUED_FOR_DELETE;\r\n\r\n  const isReIngestDisabled =\r\n    isDeletePending ||\r\n    isReIngestPending ||\r\n    row.original.status === IngestJobStatus.PRE_PROCESSING ||\r\n    row.original.status === IngestJobStatus.PROCESSING;\r\n\r\n  return (\r\n    <DropdownMenu>\r\n      <DropdownMenuTrigger asChild>\r\n        <Button size=\"icon\" variant=\"ghost\">\r\n          <EllipsisVerticalIcon className=\"size-4\" />\r\n        </Button>\r\n      </DropdownMenuTrigger>\r\n\r\n      <DropdownMenuContent>\r\n        <DropdownMenuItem onClick={handleCopy}>\r\n          <CopyIcon className=\"size-4\" />\r\n          Copy ID\r\n        </DropdownMenuItem>\r\n\r\n        <DropdownMenuItem\r\n          disabled={isReIngestDisabled}\r\n          onClick={handleReIngest}\r\n        >\r\n          <RefreshCwIcon className=\"size-4\" />\r\n          Re-ingest\r\n        </DropdownMenuItem>\r\n\r\n        <DropdownMenuItem disabled={isDeleteDisabled} onClick={handleDelete}>\r\n          <Trash2Icon className=\"size-4\" />\r\n          Delete\r\n        </DropdownMenuItem>\r\n      </DropdownMenuContent>\r\n    </DropdownMenu>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAMA;AAEA;AAAA;AACA;AAAA;AAAA;;;;;;;;;;AAUO,SAAS,WAAW,EAAE,GAAG,EAAwB;IACtD,MAAM,cAAc,CAAA,GAAA,sLAAA,CAAA,iBAAc,AAAD;IACjC,MAAM,EAAE,eAAe,EAAE,GAAG,CAAA,GAAA,uJAAA,CAAA,eAAY,AAAD;IACvC,MAAM,OAAO,CAAA,GAAA,oIAAA,CAAA,UAAO,AAAD;IACnB,MAAM,EAAE,QAAQ,SAAS,EAAE,WAAW,eAAe,EAAE,GAAG,CAAA,GAAA,8KAAA,CAAA,cAAW,AAAD,EAClE,KAAK,SAAS,CAAC,MAAM,CAAC,eAAe,CAAC;QACpC,WAAW;YACT,wIAAA,CAAA,QAAK,CAAC,OAAO,CAAC;YACd,KAAK,YAAY,iBAAiB,CAChC,KAAK,SAAS,CAAC,GAAG,CAAC,WAAW,CAAC;gBAC7B,aAAa,gBAAgB,EAAE;YACjC;QAEJ;QACA,SAAS,CAAC;YACR,wIAAA,CAAA,QAAK,CAAC,KAAK,CAAC,MAAM,OAAO;QAC3B;IACF;IAGF,MAAM,EAAE,QAAQ,WAAW,EAAE,WAAW,iBAAiB,EAAE,GAAG,CAAA,GAAA,8KAAA,CAAA,cAAW,AAAD,EACtE,KAAK,SAAS,CAAC,QAAQ,CAAC,eAAe,CAAC;QACtC,WAAW;YACT,wIAAA,CAAA,QAAK,CAAC,OAAO,CAAC;YACd,KAAK,YAAY,iBAAiB,CAChC,KAAK,SAAS,CAAC,GAAG,CAAC,WAAW,CAAC;gBAC7B,aAAa,gBAAgB,EAAE;YACjC;QAEJ;QACA,SAAS,CAAC;YACR,wIAAA,CAAA,QAAK,CAAC,KAAK,CAAC,MAAM,OAAO;QAC3B;IACF;IAGF,MAAM,aAAa;QACjB,MAAM,UAAU,SAAS,CAAC,SAAS,CAAC,CAAA,GAAA,uIAAA,CAAA,WAAQ,AAAD,EAAE,IAAI,QAAQ,CAAC,EAAE,EAAE;QAC9D,wIAAA,CAAA,QAAK,CAAC,OAAO,CAAC;IAChB;IAEA,MAAM,eAAe;QACnB,UAAU;YACR,aAAa,gBAAgB,EAAE;YAC/B,OAAO,IAAI,QAAQ,CAAC,EAAE;QACxB;IACF;IAEA,MAAM,iBAAiB;QACrB,YAAY;YACV,aAAa,gBAAgB,EAAE;YAC/B,OAAO,IAAI,QAAQ,CAAC,EAAE;QACxB;IACF;IAEA,MAAM,mBACJ,mBACA,qBACA,IAAI,QAAQ,CAAC,MAAM,KAAK,6HAAA,CAAA,kBAAe,CAAC,QAAQ,IAChD,IAAI,QAAQ,CAAC,MAAM,KAAK,6HAAA,CAAA,kBAAe,CAAC,iBAAiB;IAE3D,MAAM,qBACJ,mBACA,qBACA,IAAI,QAAQ,CAAC,MAAM,KAAK,6HAAA,CAAA,kBAAe,CAAC,cAAc,IACtD,IAAI,QAAQ,CAAC,MAAM,KAAK,6HAAA,CAAA,kBAAe,CAAC,UAAU;IAEpD,qBACE,8OAAC,wJAAA,CAAA,eAAY;;0BACX,8OAAC,wJAAA,CAAA,sBAAmB;gBAAC,OAAO;0BAC1B,cAAA,8OAAC,8IAAA,CAAA,SAAM;oBAAC,MAAK;oBAAO,SAAQ;8BAC1B,cAAA,8OAAC,kOAAA,CAAA,uBAAoB;wBAAC,WAAU;;;;;;;;;;;;;;;;0BAIpC,8OAAC,wJAAA,CAAA,sBAAmB;;kCAClB,8OAAC,wJAAA,CAAA,mBAAgB;wBAAC,SAAS;;0CACzB,8OAAC,sMAAA,CAAA,WAAQ;gCAAC,WAAU;;;;;;4BAAW;;;;;;;kCAIjC,8OAAC,wJAAA,CAAA,mBAAgB;wBACf,UAAU;wBACV,SAAS;;0CAET,8OAAC,oNAAA,CAAA,gBAAa;gCAAC,WAAU;;;;;;4BAAW;;;;;;;kCAItC,8OAAC,wJAAA,CAAA,mBAAgB;wBAAC,UAAU;wBAAkB,SAAS;;0CACrD,8OAAC,8MAAA,CAAA,aAAU;gCAAC,WAAU;;;;;;4BAAW;;;;;;;;;;;;;;;;;;;AAM3C","debugId":null}},
    {"offset": {"line": 4075, "column": 0}, "map": {"version":3,"sources":["file:///C:/app/agentset/apps/web/src/app/app.agentset.ai/%28dashboard%29/%5Bslug%5D/%5BnamespaceSlug%5D/documents/columns.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport type { ColumnDef } from \"@tanstack/react-table\";\r\nimport { capitalize } from \"@/lib/string-utils\";\r\nimport { formatDuration } from \"@/lib/utils\";\r\nimport { ChevronDownIcon, ChevronRightIcon } from \"lucide-react\";\r\n\r\nimport type { IngestJob } from \"@agentset/db\";\r\nimport type { BadgeProps } from \"@agentset/ui\";\r\nimport { IngestJobStatus } from \"@agentset/db\";\r\nimport {\r\n  Badge,\r\n  Button,\r\n  Dialog,\r\n  DialogContent,\r\n  DialogHeader,\r\n  DialogTitle,\r\n  DialogTrigger,\r\n  Tooltip,\r\n  TooltipContent,\r\n  TooltipTrigger,\r\n} from \"@agentset/ui\";\r\n\r\nimport { JobActions } from \"./actions\";\r\n\r\n// This type is used to define the shape of our data.\r\n// You can use a Zod schema here if you want.\r\nexport interface JobCol {\r\n  id: string;\r\n  status: IngestJobStatus;\r\n  payload: IngestJob[\"payload\"];\r\n  config: IngestJob[\"config\"];\r\n  tenantId?: IngestJob[\"tenantId\"];\r\n  completedAt?: IngestJob[\"completedAt\"];\r\n  failedAt?: IngestJob[\"failedAt\"];\r\n  error?: IngestJob[\"error\"];\r\n  queuedAt?: IngestJob[\"queuedAt\"];\r\n  createdAt: IngestJob[\"createdAt\"];\r\n}\r\n\r\nconst statusToBadgeVariant = (\r\n  status: IngestJobStatus,\r\n): BadgeProps[\"variant\"] => {\r\n  switch (status) {\r\n    case IngestJobStatus.FAILED:\r\n    case IngestJobStatus.CANCELLED:\r\n    case IngestJobStatus.QUEUED_FOR_DELETE:\r\n    case IngestJobStatus.DELETING:\r\n      return \"destructive\";\r\n    case IngestJobStatus.COMPLETED:\r\n      return \"success\";\r\n    case IngestJobStatus.PRE_PROCESSING:\r\n      return \"secondary\";\r\n    case IngestJobStatus.PROCESSING:\r\n      return \"default\";\r\n    default:\r\n      return \"outline\";\r\n  }\r\n};\r\n\r\nconst formatDate = (date: Date | string) => {\r\n  return new Date(date).toLocaleString();\r\n};\r\n\r\nexport const columns: ColumnDef<JobCol>[] = [\r\n  {\r\n    id: \"expand\",\r\n    header: \"\",\r\n    cell: ({ row, table }) => {\r\n      const meta = table.options.meta as JobsTableMeta | undefined;\r\n      const expandedJobId = meta?.expandedJobId;\r\n      const onExpand = meta?.onExpand;\r\n      const isExpanded = expandedJobId === row.original.id;\r\n      return (\r\n        <Tooltip>\r\n          <TooltipTrigger asChild>\r\n            <Button\r\n              variant=\"ghost\"\r\n              size=\"icon\"\r\n              aria-label={isExpanded ? \"Collapse\" : \"Expand\"}\r\n              onClick={() => onExpand?.(isExpanded ? null : row.original.id)}\r\n            >\r\n              {isExpanded ? (\r\n                <ChevronDownIcon className=\"size-4\" />\r\n              ) : (\r\n                <ChevronRightIcon className=\"size-4\" />\r\n              )}\r\n            </Button>\r\n          </TooltipTrigger>\r\n          <TooltipContent>View Documents</TooltipContent>\r\n        </Tooltip>\r\n      );\r\n    },\r\n    size: 32,\r\n  },\r\n  {\r\n    id: \"name\",\r\n    accessorKey: \"payload\",\r\n    header: \"Name\",\r\n    cell: ({ row }) => {\r\n      const name =\r\n        (\"name\" in row.original.payload ? row.original.payload.name : null) ??\r\n        \"-\";\r\n      return (\r\n        <p title={name}>\r\n          {name.length > 20 ? name.slice(0, 20) + \"...\" : name}\r\n        </p>\r\n      );\r\n    },\r\n  },\r\n  {\r\n    id: \"type\",\r\n    accessorKey: \"payload\",\r\n    header: \"Type\",\r\n    cell: ({ row }) => {\r\n      return (\r\n        <p>{capitalize(row.original.payload.type.split(\"_\").join(\" \"))}</p>\r\n      );\r\n    },\r\n  },\r\n  {\r\n    accessorKey: \"config\",\r\n    header: \"Config\",\r\n    cell: ({ row }) => {\r\n      const config = row.original.config;\r\n      if (!config) return <p>-</p>;\r\n\r\n      const configStr = JSON.stringify(config, null, 2);\r\n      const truncatedConfig =\r\n        configStr.length > 50 ? configStr.slice(0, 50) + \"...\" : configStr;\r\n\r\n      return (\r\n        <Dialog>\r\n          <DialogTrigger asChild>\r\n            <Button variant=\"ghost\" className=\"h-auto p-0 hover:bg-transparent\">\r\n              <pre className=\"text-left\">{truncatedConfig}</pre>\r\n            </Button>\r\n          </DialogTrigger>\r\n          <DialogContent className=\"max-w-3xl\">\r\n            <DialogHeader>\r\n              <DialogTitle>Job Config</DialogTitle>\r\n            </DialogHeader>\r\n            <pre className=\"bg-muted max-h-[60vh] overflow-auto rounded-md p-4\">\r\n              {configStr}\r\n            </pre>\r\n          </DialogContent>\r\n        </Dialog>\r\n      );\r\n    },\r\n  },\r\n  {\r\n    accessorKey: \"tenantId\",\r\n    header: \"Tenant ID\",\r\n    cell: ({ row }) => {\r\n      return <p>{row.original.tenantId ?? \"-\"}</p>;\r\n    },\r\n  },\r\n\r\n  {\r\n    accessorKey: \"status\",\r\n    header: \"Status\",\r\n    cell: ({ row }) => {\r\n      const badge = (\r\n        <Badge\r\n          variant={statusToBadgeVariant(row.original.status)}\r\n          className=\"capitalize\"\r\n        >\r\n          {capitalize(row.original.status.split(\"_\").join(\" \"))}\r\n        </Badge>\r\n      );\r\n\r\n      if (!row.original.error) return badge;\r\n\r\n      return (\r\n        <Tooltip>\r\n          <TooltipTrigger asChild>{badge}</TooltipTrigger>\r\n          <TooltipContent>{row.original.error}</TooltipContent>\r\n        </Tooltip>\r\n      );\r\n    },\r\n  },\r\n  {\r\n    accessorKey: \"createdAt\",\r\n    header: \"Created At\",\r\n    cell: ({ row }) => {\r\n      return <p>{formatDate(row.original.createdAt)}</p>;\r\n    },\r\n  },\r\n  {\r\n    id: \"duration\",\r\n    header: \"Duration\",\r\n    cell: ({ row }) => {\r\n      const finishDate = row.original.completedAt ?? row.original.failedAt;\r\n      return (\r\n        <p>\r\n          {finishDate && row.original.queuedAt\r\n            ? formatDuration(row.original.queuedAt, finishDate)\r\n            : \"-\"}\r\n        </p>\r\n      );\r\n    },\r\n  },\r\n  {\r\n    id: \"actions\",\r\n    cell: ({ row }) => <JobActions row={row} />,\r\n  },\r\n];\r\n\r\n// Add a type for TableMeta to allow expandedJobId and onExpand\r\nexport type JobsTableMeta = {\r\n  expandedJobId?: string | null;\r\n  onExpand?: (jobId: string | null) => void;\r\n};\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 4379, "column": 0}, "map": {"version":3,"sources":["file:///C:/app/agentset/apps/web/src/app/app.agentset.ai/%28dashboard%29/%5Bslug%5D/%5BnamespaceSlug%5D/documents/document-actions.tsx"],"sourcesContent":["import type { Row } from \"@tanstack/react-table\";\r\nimport { useNamespace } from \"@/contexts/namespace-context\";\r\nimport { prefixId } from \"@/lib/api/ids\";\r\nimport { useTRPC } from \"@/trpc/react\";\r\nimport { useMutation, useQueryClient } from \"@tanstack/react-query\";\r\nimport { CopyIcon, EllipsisVerticalIcon, Trash2Icon } from \"lucide-react\";\r\nimport { toast } from \"sonner\";\r\n\r\nimport { DocumentStatus } from \"@agentset/db\";\r\nimport {\r\n  Button,\r\n  DropdownMenu,\r\n  DropdownMenuContent,\r\n  DropdownMenuItem,\r\n  DropdownMenuTrigger,\r\n} from \"@agentset/ui\";\r\n\r\nimport type { DocumentCol } from \"./documents-columns\";\r\n\r\nexport default function DocumentActions({ row }: { row: Row<DocumentCol> }) {\r\n  const { activeNamespace } = useNamespace();\r\n  const trpc = useTRPC();\r\n  const queryClient = useQueryClient();\r\n\r\n  const { isPending, mutate: deleteDocument } = useMutation(\r\n    trpc.document.delete.mutationOptions({\r\n      onSuccess: () => {\r\n        toast.success(\"Document deleted successfully\");\r\n        void queryClient.invalidateQueries(\r\n          trpc.document.all.queryFilter({\r\n            namespaceId: activeNamespace.id,\r\n          }),\r\n        );\r\n      },\r\n      onError: (error) => {\r\n        toast.error(error.message);\r\n      },\r\n    }),\r\n  );\r\n\r\n  const handleCopy = async () => {\r\n    await navigator.clipboard.writeText(prefixId(row.original.id, \"doc_\"));\r\n    toast.success(\"Copied ID\");\r\n  };\r\n\r\n  const handleDelete = () => {\r\n    deleteDocument({\r\n      documentId: row.original.id,\r\n      namespaceId: activeNamespace.id,\r\n    });\r\n  };\r\n\r\n  const isDeleteDisabled =\r\n    isPending ||\r\n    row.original.status === DocumentStatus.DELETING ||\r\n    row.original.status === DocumentStatus.QUEUED_FOR_DELETE;\r\n\r\n  return (\r\n    <DropdownMenu>\r\n      <DropdownMenuTrigger asChild>\r\n        <Button size=\"icon\" variant=\"ghost\">\r\n          <EllipsisVerticalIcon className=\"size-4\" />\r\n        </Button>\r\n      </DropdownMenuTrigger>\r\n\r\n      <DropdownMenuContent>\r\n        <DropdownMenuItem onClick={handleCopy}>\r\n          <CopyIcon className=\"size-4\" />\r\n          Copy ID\r\n        </DropdownMenuItem>\r\n\r\n        <DropdownMenuItem disabled={isDeleteDisabled} onClick={handleDelete}>\r\n          <Trash2Icon className=\"size-4\" />\r\n          Delete\r\n        </DropdownMenuItem>\r\n      </DropdownMenuContent>\r\n    </DropdownMenu>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AAEA;AAAA;AACA;AAAA;AAAA;;;;;;;;;;AAUe,SAAS,gBAAgB,EAAE,GAAG,EAA6B;IACxE,MAAM,EAAE,eAAe,EAAE,GAAG,CAAA,GAAA,uJAAA,CAAA,eAAY,AAAD;IACvC,MAAM,OAAO,CAAA,GAAA,oIAAA,CAAA,UAAO,AAAD;IACnB,MAAM,cAAc,CAAA,GAAA,sLAAA,CAAA,iBAAc,AAAD;IAEjC,MAAM,EAAE,SAAS,EAAE,QAAQ,cAAc,EAAE,GAAG,CAAA,GAAA,8KAAA,CAAA,cAAW,AAAD,EACtD,KAAK,QAAQ,CAAC,MAAM,CAAC,eAAe,CAAC;QACnC,WAAW;YACT,wIAAA,CAAA,QAAK,CAAC,OAAO,CAAC;YACd,KAAK,YAAY,iBAAiB,CAChC,KAAK,QAAQ,CAAC,GAAG,CAAC,WAAW,CAAC;gBAC5B,aAAa,gBAAgB,EAAE;YACjC;QAEJ;QACA,SAAS,CAAC;YACR,wIAAA,CAAA,QAAK,CAAC,KAAK,CAAC,MAAM,OAAO;QAC3B;IACF;IAGF,MAAM,aAAa;QACjB,MAAM,UAAU,SAAS,CAAC,SAAS,CAAC,CAAA,GAAA,uIAAA,CAAA,WAAQ,AAAD,EAAE,IAAI,QAAQ,CAAC,EAAE,EAAE;QAC9D,wIAAA,CAAA,QAAK,CAAC,OAAO,CAAC;IAChB;IAEA,MAAM,eAAe;QACnB,eAAe;YACb,YAAY,IAAI,QAAQ,CAAC,EAAE;YAC3B,aAAa,gBAAgB,EAAE;QACjC;IACF;IAEA,MAAM,mBACJ,aACA,IAAI,QAAQ,CAAC,MAAM,KAAK,6HAAA,CAAA,iBAAc,CAAC,QAAQ,IAC/C,IAAI,QAAQ,CAAC,MAAM,KAAK,6HAAA,CAAA,iBAAc,CAAC,iBAAiB;IAE1D,qBACE,8OAAC,wJAAA,CAAA,eAAY;;0BACX,8OAAC,wJAAA,CAAA,sBAAmB;gBAAC,OAAO;0BAC1B,cAAA,8OAAC,8IAAA,CAAA,SAAM;oBAAC,MAAK;oBAAO,SAAQ;8BAC1B,cAAA,8OAAC,kOAAA,CAAA,uBAAoB;wBAAC,WAAU;;;;;;;;;;;;;;;;0BAIpC,8OAAC,wJAAA,CAAA,sBAAmB;;kCAClB,8OAAC,wJAAA,CAAA,mBAAgB;wBAAC,SAAS;;0CACzB,8OAAC,sMAAA,CAAA,WAAQ;gCAAC,WAAU;;;;;;4BAAW;;;;;;;kCAIjC,8OAAC,wJAAA,CAAA,mBAAgB;wBAAC,UAAU;wBAAkB,SAAS;;0CACrD,8OAAC,8MAAA,CAAA,aAAU;gCAAC,WAAU;;;;;;4BAAW;;;;;;;;;;;;;;;;;;;AAM3C","debugId":null}},
    {"offset": {"line": 4512, "column": 0}, "map": {"version":3,"sources":["file:///C:/app/agentset/apps/web/src/app/app.agentset.ai/%28dashboard%29/%5Bslug%5D/%5BnamespaceSlug%5D/documents/documents-columns.tsx"],"sourcesContent":["import type { ColumnDef } from \"@tanstack/react-table\";\r\nimport { capitalize } from \"@/lib/string-utils\";\r\nimport { formatDuration, formatNumber } from \"@/lib/utils\";\r\nimport { BookTextIcon, Code2Icon, FileTextIcon, ImageIcon } from \"lucide-react\";\r\n\r\nimport type { Document } from \"@agentset/db\";\r\nimport type { BadgeProps } from \"@agentset/ui\";\r\nimport { DocumentStatus } from \"@agentset/db\";\r\nimport {\r\n  Badge,\r\n  formatBytes,\r\n  Tooltip,\r\n  TooltipContent,\r\n  TooltipTrigger,\r\n} from \"@agentset/ui\";\r\n\r\nimport DocumentActions from \"./document-actions\";\r\n\r\nexport interface DocumentCol {\r\n  id: string;\r\n  status: DocumentStatus;\r\n  name?: Document[\"name\"];\r\n  source: Document[\"source\"];\r\n  totalChunks: number;\r\n  totalCharacters: number;\r\n  totalTokens: number;\r\n  totalPages: number;\r\n  documentProperties?: Document[\"documentProperties\"];\r\n  failedAt?: Document[\"failedAt\"];\r\n  error?: Document[\"error\"];\r\n  completedAt?: Document[\"completedAt\"];\r\n  queuedAt?: Document[\"queuedAt\"];\r\n  createdAt: Date;\r\n}\r\n\r\nconst MimeType = ({ mimeType }: { mimeType: string }) => {\r\n  let Icon;\r\n  if (mimeType === \"application/pdf\") {\r\n    Icon = BookTextIcon;\r\n  } else if (mimeType.startsWith(\"image/\")) {\r\n    Icon = ImageIcon;\r\n  } else if (\r\n    mimeType === \"text/html\" ||\r\n    mimeType === \"application/xhtml+xml\" ||\r\n    mimeType === \"text/xml\"\r\n  ) {\r\n    Icon = Code2Icon;\r\n  } else {\r\n    Icon = FileTextIcon;\r\n  }\r\n\r\n  return (\r\n    <div className=\"flex flex-row gap-2\">\r\n      <Tooltip>\r\n        <TooltipTrigger>\r\n          <Icon className=\"size-5\" />\r\n        </TooltipTrigger>\r\n        <TooltipContent>{mimeType}</TooltipContent>\r\n      </Tooltip>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst statusToBadgeVariant = (\r\n  status: DocumentStatus,\r\n): BadgeProps[\"variant\"] => {\r\n  switch (status) {\r\n    case DocumentStatus.FAILED:\r\n    case DocumentStatus.CANCELLED:\r\n    case DocumentStatus.QUEUED_FOR_DELETE:\r\n    case DocumentStatus.DELETING:\r\n      return \"destructive\";\r\n\r\n    case DocumentStatus.COMPLETED:\r\n      return \"success\";\r\n\r\n    case DocumentStatus.PRE_PROCESSING:\r\n      return \"secondary\";\r\n    case DocumentStatus.PROCESSING:\r\n      return \"default\";\r\n    default:\r\n      return \"outline\";\r\n  }\r\n};\r\n\r\nexport const documentColumns: ColumnDef<DocumentCol>[] = [\r\n  {\r\n    accessorKey: \"name\",\r\n    header: \"Name\",\r\n    cell: ({ row }) => {\r\n      const name = row.original.name ?? \"-\";\r\n\r\n      return (\r\n        <p title={name}>\r\n          {name.length > 20 ? name.slice(0, 20) + \"...\" : name}\r\n        </p>\r\n      );\r\n    },\r\n  },\r\n  {\r\n    id: \"source\",\r\n    header: \"Source\",\r\n    accessorKey: \"source\",\r\n    cell: ({ row }) => {\r\n      return <p>{capitalize(row.original.source.type.split(\"_\").join(\" \"))}</p>;\r\n    },\r\n  },\r\n  {\r\n    id: \"type\",\r\n    header: \"Type\",\r\n    accessorKey: \"documentProperties.mimeType\",\r\n    cell: ({ row }) => {\r\n      return (\r\n        <div>\r\n          {row.original.documentProperties?.mimeType ? (\r\n            <MimeType mimeType={row.original.documentProperties.mimeType} />\r\n          ) : (\r\n            \"-\"\r\n          )}\r\n        </div>\r\n      );\r\n    },\r\n  },\r\n  {\r\n    accessorKey: \"totalChunks\",\r\n    header: \"Total Chunks\",\r\n    cell: ({ row }) => {\r\n      return <p>{formatNumber(row.original.totalChunks, \"compact\")}</p>;\r\n    },\r\n  },\r\n  {\r\n    accessorKey: \"totalCharacters\",\r\n    header: \"Total Characters\",\r\n    cell: ({ row }) => {\r\n      return <p>{formatNumber(row.original.totalCharacters, \"compact\")}</p>;\r\n    },\r\n  },\r\n  {\r\n    accessorKey: \"totalTokens\",\r\n    header: \"Total Tokens\",\r\n    cell: ({ row }) => {\r\n      return <p>{formatNumber(row.original.totalTokens, \"compact\")}</p>;\r\n    },\r\n  },\r\n  {\r\n    accessorKey: \"totalPages\",\r\n    header: \"Total Pages\",\r\n    cell: ({ row }) => {\r\n      return <p>{formatNumber(row.original.totalPages, \"compact\")}</p>;\r\n    },\r\n  },\r\n  {\r\n    id: \"size\",\r\n    accessorKey: \"documentProperties.fileSize\",\r\n    header: \"Size\",\r\n    cell: ({ row }) => {\r\n      return (\r\n        <p>\r\n          {row.original.documentProperties?.fileSize\r\n            ? formatBytes(row.original.documentProperties.fileSize)\r\n            : \"-\"}\r\n        </p>\r\n      );\r\n    },\r\n  },\r\n  {\r\n    id: \"status\",\r\n    header: \"Status\",\r\n    cell: ({ row }) => {\r\n      const badge = (\r\n        <Badge\r\n          variant={statusToBadgeVariant(row.original.status)}\r\n          className=\"capitalize\"\r\n        >\r\n          {capitalize(row.original.status.split(\"_\").join(\" \"))}\r\n        </Badge>\r\n      );\r\n      if (!row.original.error) return badge;\r\n\r\n      return (\r\n        <Tooltip>\r\n          <TooltipTrigger asChild>{badge}</TooltipTrigger>\r\n          <TooltipContent>{row.original.error}</TooltipContent>\r\n        </Tooltip>\r\n      );\r\n    },\r\n  },\r\n  {\r\n    id: \"duration\",\r\n    header: \"Duration\",\r\n    cell: ({ row }) => {\r\n      const finishDate = row.original.completedAt ?? row.original.failedAt;\r\n      return (\r\n        <p>\r\n          {finishDate && row.original.queuedAt\r\n            ? formatDuration(row.original.queuedAt, finishDate)\r\n            : \"-\"}\r\n        </p>\r\n      );\r\n    },\r\n  },\r\n  {\r\n    id: \"actions\",\r\n    cell: ({ row }) => <DocumentActions row={row} />, // Use the DocumentActions component\r\n  },\r\n];\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 4786, "column": 0}, "map": {"version":3,"sources":["file:///C:/app/agentset/apps/web/src/app/app.agentset.ai/%28dashboard%29/%5Bslug%5D/%5BnamespaceSlug%5D/documents/paginated-table.tsx"],"sourcesContent":["import type { ColumnDef, TableMeta } from \"@tanstack/react-table\";\r\n\r\nimport { Button, cn, DataTable } from \"@agentset/ui\";\r\n\r\ninterface PaginatedTableProps<T> {\r\n  columns: ColumnDef<T>[];\r\n  data?: {\r\n    records: T[];\r\n    nextCursor?: string | null;\r\n  };\r\n  meta?: TableMeta<T>;\r\n  isLoading: boolean;\r\n  isDialog?: boolean;\r\n  onNext?: ({ nextCursor }: { nextCursor?: string | null }) => void;\r\n  onPrevious?: () => void;\r\n  hasPrevious?: boolean;\r\n}\r\n\r\nexport function PaginatedTable<T>({\r\n  columns,\r\n  data,\r\n  meta,\r\n  isLoading,\r\n  isDialog,\r\n  onNext,\r\n  onPrevious,\r\n  hasPrevious,\r\n}: PaginatedTableProps<T>) {\r\n  return (\r\n    <div className=\"overflow-x-auto\">\r\n      <div className={cn(\"w-full\", isDialog && \"min-h-[450px]\")}>\r\n        <DataTable\r\n          columns={columns}\r\n          data={data?.records}\r\n          isLoading={isLoading}\r\n          meta={meta}\r\n        />\r\n      </div>\r\n\r\n      <div className=\"mt-10 flex gap-4\">\r\n        <Button variant=\"outline\" onClick={onPrevious} disabled={!hasPrevious}>\r\n          Previous Page\r\n        </Button>\r\n\r\n        <Button\r\n          variant=\"outline\"\r\n          onClick={() => onNext?.({ nextCursor: data?.nextCursor })}\r\n          disabled={!data?.nextCursor}\r\n        >\r\n          Next Page\r\n        </Button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AAAA;AAAA;AAAA;;;AAgBO,SAAS,eAAkB,EAChC,OAAO,EACP,IAAI,EACJ,IAAI,EACJ,SAAS,EACT,QAAQ,EACR,MAAM,EACN,UAAU,EACV,WAAW,EACY;IACvB,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAI,WAAW,CAAA,GAAA,qIAAA,CAAA,KAAE,AAAD,EAAE,UAAU,YAAY;0BACvC,cAAA,8OAAC,qJAAA,CAAA,YAAS;oBACR,SAAS;oBACT,MAAM,MAAM;oBACZ,WAAW;oBACX,MAAM;;;;;;;;;;;0BAIV,8OAAC;gBAAI,WAAU;;kCACb,8OAAC,8IAAA,CAAA,SAAM;wBAAC,SAAQ;wBAAU,SAAS;wBAAY,UAAU,CAAC;kCAAa;;;;;;kCAIvE,8OAAC,8IAAA,CAAA,SAAM;wBACL,SAAQ;wBACR,SAAS,IAAM,SAAS;gCAAE,YAAY,MAAM;4BAAW;wBACvD,UAAU,CAAC,MAAM;kCAClB;;;;;;;;;;;;;;;;;;AAMT","debugId":null}},
    {"offset": {"line": 4861, "column": 0}, "map": {"version":3,"sources":["file:///C:/app/agentset/apps/web/src/app/app.agentset.ai/%28dashboard%29/%5Bslug%5D/%5BnamespaceSlug%5D/documents/paginated-table-header.tsx"],"sourcesContent":["import { FilterIcon, RefreshCcwIcon } from \"lucide-react\";\r\n\r\nimport {\r\n  Button,\r\n  DropdownMenu,\r\n  DropdownMenuCheckboxItem,\r\n  DropdownMenuContent,\r\n  DropdownMenuTrigger,\r\n} from \"@agentset/ui\";\r\n\r\ninterface PaginatedTableHeaderProps<T extends string> {\r\n  statuses: T[];\r\n  setStatuses: (statuses: T[]) => void;\r\n  statusLabels: { label: string; value: T }[];\r\n  onRefresh: () => void;\r\n  isRefreshing: boolean;\r\n}\r\n\r\nexport function PaginatedTableHeader<T extends string>({\r\n  statuses,\r\n  setStatuses,\r\n  statusLabels,\r\n  onRefresh,\r\n  isRefreshing,\r\n}: PaginatedTableHeaderProps<T>) {\r\n  return (\r\n    <div className=\"flex gap-4\">\r\n      <DropdownMenu>\r\n        <DropdownMenuTrigger asChild>\r\n          <Button variant=\"outline\">\r\n            <FilterIcon className=\"size-4\" />\r\n            Filter\r\n          </Button>\r\n        </DropdownMenuTrigger>\r\n\r\n        <DropdownMenuContent align=\"end\">\r\n          {statusLabels.map(({ label, value }) => (\r\n            <DropdownMenuCheckboxItem\r\n              key={value}\r\n              checked={statuses.includes(value)}\r\n              onSelect={(e) => e.preventDefault()}\r\n              onCheckedChange={() =>\r\n                setStatuses(\r\n                  statuses.includes(value)\r\n                    ? statuses.filter((s) => s !== value)\r\n                    : [...statuses, value],\r\n                )\r\n              }\r\n              className=\"capitalize\"\r\n            >\r\n              {label}\r\n            </DropdownMenuCheckboxItem>\r\n          ))}\r\n        </DropdownMenuContent>\r\n      </DropdownMenu>\r\n\r\n      <Button\r\n        onClick={onRefresh}\r\n        disabled={isRefreshing}\r\n        className=\"flex items-center gap-2\"\r\n      >\r\n        <RefreshCcwIcon className=\"h-4 w-4\" />\r\n        Refresh\r\n      </Button>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AAAA;AAEA;AAAA;AAAA;;;;AAgBO,SAAS,qBAAuC,EACrD,QAAQ,EACR,WAAW,EACX,YAAY,EACZ,SAAS,EACT,YAAY,EACiB;IAC7B,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC,wJAAA,CAAA,eAAY;;kCACX,8OAAC,wJAAA,CAAA,sBAAmB;wBAAC,OAAO;kCAC1B,cAAA,8OAAC,8IAAA,CAAA,SAAM;4BAAC,SAAQ;;8CACd,8OAAC,0MAAA,CAAA,aAAU;oCAAC,WAAU;;;;;;gCAAW;;;;;;;;;;;;kCAKrC,8OAAC,wJAAA,CAAA,sBAAmB;wBAAC,OAAM;kCACxB,aAAa,GAAG,CAAC,CAAC,EAAE,KAAK,EAAE,KAAK,EAAE,iBACjC,8OAAC,wJAAA,CAAA,2BAAwB;gCAEvB,SAAS,SAAS,QAAQ,CAAC;gCAC3B,UAAU,CAAC,IAAM,EAAE,cAAc;gCACjC,iBAAiB,IACf,YACE,SAAS,QAAQ,CAAC,SACd,SAAS,MAAM,CAAC,CAAC,IAAM,MAAM,SAC7B;2CAAI;wCAAU;qCAAM;gCAG5B,WAAU;0CAET;+BAZI;;;;;;;;;;;;;;;;0BAkBb,8OAAC,8IAAA,CAAA,SAAM;gBACL,SAAS;gBACT,UAAU;gBACV,WAAU;;kCAEV,8OAAC,sNAAA,CAAA,iBAAc;wBAAC,WAAU;;;;;;oBAAY;;;;;;;;;;;;;AAK9C","debugId":null}},
    {"offset": {"line": 4962, "column": 0}, "map": {"version":3,"sources":["file:///C:/app/agentset/apps/web/src/hooks/use-cursor-pagination.ts"],"sourcesContent":["import { useState } from \"react\";\r\n\r\nexport function useCursorPagination() {\r\n  const [cursor, setCursor] = useState<string | null>(null);\r\n  const [cursorDirection, setCursorDirection] = useState<\r\n    \"forward\" | \"backward\"\r\n  >(\"forward\");\r\n  const [cursors, setCursors] = useState<string[]>([]);\r\n\r\n  const handleNext = ({ nextCursor }: { nextCursor?: string | null }) => {\r\n    if (nextCursor) {\r\n      setCursorDirection(\"forward\");\r\n\r\n      setCursor(nextCursor);\r\n      setCursors((prev) => [...prev, nextCursor]);\r\n    }\r\n  };\r\n\r\n  const handlePrevious = () => {\r\n    const previousCursor = cursors[cursors.length - 1];\r\n    if (previousCursor) {\r\n      setCursorDirection(\"backward\");\r\n      setCursor(previousCursor);\r\n      setCursors((prev) => prev.slice(0, -1));\r\n    } else {\r\n      setCursor(null);\r\n    }\r\n  };\r\n\r\n  return {\r\n    cursor: cursor ?? undefined,\r\n    cursorDirection,\r\n    handleNext,\r\n    handlePrevious,\r\n    hasPrevious: cursors.length > 0,\r\n  };\r\n}\r\n"],"names":[],"mappings":";;;AAAA;;AAEO,SAAS;IACd,MAAM,CAAC,QAAQ,UAAU,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAiB;IACpD,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAEnD;IACF,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAY,EAAE;IAEnD,MAAM,aAAa,CAAC,EAAE,UAAU,EAAkC;QAChE,IAAI,YAAY;YACd,mBAAmB;YAEnB,UAAU;YACV,WAAW,CAAC,OAAS;uBAAI;oBAAM;iBAAW;QAC5C;IACF;IAEA,MAAM,iBAAiB;QACrB,MAAM,iBAAiB,OAAO,CAAC,QAAQ,MAAM,GAAG,EAAE;QAClD,IAAI,gBAAgB;YAClB,mBAAmB;YACnB,UAAU;YACV,WAAW,CAAC,OAAS,KAAK,KAAK,CAAC,GAAG,CAAC;QACtC,OAAO;YACL,UAAU;QACZ;IACF;IAEA,OAAO;QACL,QAAQ,UAAU;QAClB;QACA;QACA;QACA,aAAa,QAAQ,MAAM,GAAG;IAChC;AACF","debugId":null}},
    {"offset": {"line": 5005, "column": 0}, "map": {"version":3,"sources":["file:///C:/app/agentset/apps/web/src/app/app.agentset.ai/%28dashboard%29/%5Bslug%5D/%5BnamespaceSlug%5D/documents/use-documents.ts"],"sourcesContent":["import { useState } from \"react\";\r\nimport { useNamespace } from \"@/contexts/namespace-context\";\r\nimport { useCursorPagination } from \"@/hooks/use-cursor-pagination\";\r\nimport { capitalize } from \"@/lib/string-utils\";\r\nimport { useTRPC } from \"@/trpc/react\";\r\nimport { keepPreviousData, useQuery } from \"@tanstack/react-query\";\r\n\r\nimport { DocumentStatus } from \"@agentset/db\";\r\n\r\nconst statusLabels = Object.values(DocumentStatus).map((status) => ({\r\n  label: capitalize(status.split(\"_\").join(\" \")) as string,\r\n  value: status,\r\n}));\r\n\r\nexport function useDocuments(jobId?: string, enabled = true) {\r\n  const { activeNamespace } = useNamespace();\r\n  const trpc = useTRPC();\r\n  const [statuses, setStatuses] = useState<DocumentStatus[]>([]);\r\n  const { cursor, cursorDirection, handleNext, handlePrevious, hasPrevious } =\r\n    useCursorPagination();\r\n\r\n  const { isLoading, data, refetch, isFetching } = useQuery(\r\n    trpc.document.all.queryOptions(\r\n      {\r\n        namespaceId: activeNamespace.id,\r\n        ingestJobId: jobId,\r\n        statuses,\r\n        cursor,\r\n        cursorDirection,\r\n      },\r\n      {\r\n        placeholderData: keepPreviousData,\r\n        enabled,\r\n      },\r\n    ),\r\n  );\r\n\r\n  return {\r\n    isLoading,\r\n    isFetching,\r\n    data,\r\n    refetch,\r\n    cursor,\r\n    cursorDirection,\r\n    handleNext,\r\n    handlePrevious,\r\n    hasPrevious,\r\n    statuses,\r\n    setStatuses,\r\n    statusLabels,\r\n  };\r\n}\r\n"],"names":[],"mappings":";;;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AAEA;AAAA;;;;;;;;AAEA,MAAM,eAAe,OAAO,MAAM,CAAC,6HAAA,CAAA,iBAAc,EAAE,GAAG,CAAC,CAAC,SAAW,CAAC;QAClE,OAAO,CAAA,GAAA,4IAAA,CAAA,aAAU,AAAD,EAAE,OAAO,KAAK,CAAC,KAAK,IAAI,CAAC;QACzC,OAAO;IACT,CAAC;AAEM,SAAS,aAAa,KAAc,EAAE,UAAU,IAAI;IACzD,MAAM,EAAE,eAAe,EAAE,GAAG,CAAA,GAAA,uJAAA,CAAA,eAAY,AAAD;IACvC,MAAM,OAAO,CAAA,GAAA,oIAAA,CAAA,UAAO,AAAD;IACnB,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAoB,EAAE;IAC7D,MAAM,EAAE,MAAM,EAAE,eAAe,EAAE,UAAU,EAAE,cAAc,EAAE,WAAW,EAAE,GACxE,CAAA,GAAA,0JAAA,CAAA,sBAAmB,AAAD;IAEpB,MAAM,EAAE,SAAS,EAAE,IAAI,EAAE,OAAO,EAAE,UAAU,EAAE,GAAG,CAAA,GAAA,2KAAA,CAAA,WAAQ,AAAD,EACtD,KAAK,QAAQ,CAAC,GAAG,CAAC,YAAY,CAC5B;QACE,aAAa,gBAAgB,EAAE;QAC/B,aAAa;QACb;QACA;QACA;IACF,GACA;QACE,iBAAiB,uKAAA,CAAA,mBAAgB;QACjC;IACF;IAIJ,OAAO;QACL;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;IACF;AACF","debugId":null}},
    {"offset": {"line": 5064, "column": 0}, "map": {"version":3,"sources":["file:///C:/app/agentset/apps/web/src/app/app.agentset.ai/%28dashboard%29/%5Bslug%5D/%5BnamespaceSlug%5D/documents/use-jobs.ts"],"sourcesContent":["import { useState } from \"react\";\nimport { useNamespace } from \"@/contexts/namespace-context\";\nimport { useCursorPagination } from \"@/hooks/use-cursor-pagination\";\nimport { capitalize } from \"@/lib/string-utils\";\nimport { useTRPC } from \"@/trpc/react\";\nimport { keepPreviousData, useQuery } from \"@tanstack/react-query\";\n\nimport { IngestJobStatus } from \"@agentset/db\";\n\nconst statusLabels = Object.values(IngestJobStatus).map((status) => ({\n  label: capitalize(status.split(\"_\").join(\" \")) as string,\n  value: status,\n}));\n\nexport function useJobs() {\n  const { activeNamespace } = useNamespace();\n  const trpc = useTRPC();\n  const [statuses, setStatuses] = useState<IngestJobStatus[]>([]);\n  const [expandedJobId, setExpandedJobId] = useState<string | null>(null);\n  const { cursor, cursorDirection, handleNext, handlePrevious, hasPrevious } =\n    useCursorPagination();\n\n  const { isLoading, data, refetch, isFetching } = useQuery(\n    trpc.ingestJob.all.queryOptions(\n      {\n        namespaceId: activeNamespace.id,\n        statuses,\n        cursor,\n        cursorDirection,\n      },\n      { \n        refetchInterval: (data) => {\n          // Refetch mais frequentemente se houver jobs em andamento\n          const hasActiveJobs = data?.items?.some(job => \n            job.status === IngestJobStatus.QUEUED || \n            job.status === IngestJobStatus.PROCESSING\n          );\n          return hasActiveJobs ? 5_000 : 15_000; // 5s para jobs ativos, 15s para outros\n        },\n        placeholderData: keepPreviousData,\n        refetchOnWindowFocus: true,\n        refetchOnMount: true,\n      },\n    ),\n  );\n\n  return {\n    isLoading,\n    isFetching,\n    data,\n    refetch,\n    cursor,\n    cursorDirection,\n    handleNext,\n    handlePrevious,\n    hasPrevious,\n    statuses,\n    setStatuses,\n    statusLabels,\n    expandedJobId,\n    setExpandedJobId,\n  };\n}\n"],"names":[],"mappings":";;;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AAEA;AAAA;;;;;;;;AAEA,MAAM,eAAe,OAAO,MAAM,CAAC,6HAAA,CAAA,kBAAe,EAAE,GAAG,CAAC,CAAC,SAAW,CAAC;QACnE,OAAO,CAAA,GAAA,4IAAA,CAAA,aAAU,AAAD,EAAE,OAAO,KAAK,CAAC,KAAK,IAAI,CAAC;QACzC,OAAO;IACT,CAAC;AAEM,SAAS;IACd,MAAM,EAAE,eAAe,EAAE,GAAG,CAAA,GAAA,uJAAA,CAAA,eAAY,AAAD;IACvC,MAAM,OAAO,CAAA,GAAA,oIAAA,CAAA,UAAO,AAAD;IACnB,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAqB,EAAE;IAC9D,MAAM,CAAC,eAAe,iBAAiB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAiB;IAClE,MAAM,EAAE,MAAM,EAAE,eAAe,EAAE,UAAU,EAAE,cAAc,EAAE,WAAW,EAAE,GACxE,CAAA,GAAA,0JAAA,CAAA,sBAAmB,AAAD;IAEpB,MAAM,EAAE,SAAS,EAAE,IAAI,EAAE,OAAO,EAAE,UAAU,EAAE,GAAG,CAAA,GAAA,2KAAA,CAAA,WAAQ,AAAD,EACtD,KAAK,SAAS,CAAC,GAAG,CAAC,YAAY,CAC7B;QACE,aAAa,gBAAgB,EAAE;QAC/B;QACA;QACA;IACF,GACA;QACE,iBAAiB,CAAC;YAChB,0DAA0D;YAC1D,MAAM,gBAAgB,MAAM,OAAO,KAAK,CAAA,MACtC,IAAI,MAAM,KAAK,6HAAA,CAAA,kBAAe,CAAC,MAAM,IACrC,IAAI,MAAM,KAAK,6HAAA,CAAA,kBAAe,CAAC,UAAU;YAE3C,OAAO,gBAAgB,QAAQ,QAAQ,uCAAuC;QAChF;QACA,iBAAiB,uKAAA,CAAA,mBAAgB;QACjC,sBAAsB;QACtB,gBAAgB;IAClB;IAIJ,OAAO;QACL;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;IACF;AACF","debugId":null}},
    {"offset": {"line": 5131, "column": 0}, "map": {"version":3,"sources":["file:///C:/app/agentset/apps/web/src/app/app.agentset.ai/%28dashboard%29/%5Bslug%5D/%5BnamespaceSlug%5D/documents/page.client.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport { CodeBlock } from \"@/components/chat/code-block\";\r\nimport { prefixId } from \"@/lib/api/ids\";\r\nimport { InfoIcon } from \"lucide-react\";\r\n\r\nimport {\r\n  Alert,\r\n  AlertDescription,\r\n  Dialog,\r\n  DialogContent,\r\n  DialogDescription,\r\n  DialogHeader,\r\n  DialogTitle,\r\n  Tabs,\r\n  TabsContent,\r\n  TabsList,\r\n  TabsTrigger,\r\n} from \"@agentset/ui\";\r\n\r\nimport type { JobsTableMeta } from \"./columns\";\r\nimport { columns } from \"./columns\";\r\nimport { documentColumns } from \"./documents-columns\";\r\nimport { PaginatedTable } from \"./paginated-table\";\r\nimport { PaginatedTableHeader } from \"./paginated-table-header\";\r\nimport { useDocuments } from \"./use-documents\";\r\nimport { useJobs } from \"./use-jobs\";\r\n\r\nexport default function JobsPage() {\r\n  const [tab, setTab] = useState<\"jobs\" | \"documents\">(\"jobs\");\r\n\r\n  const {\r\n    isLoading: isJobsLoading,\r\n    data: jobsData,\r\n    refetch: refetchJobs,\r\n    isFetching: isJobsFetching,\r\n    handleNext: handleNextJob,\r\n    handlePrevious: handlePreviousJob,\r\n    hasPrevious: hasPreviousJob,\r\n    statuses: jobStatuses,\r\n    setStatuses: setJobStatuses,\r\n    statusLabels: jobStatusLabels,\r\n    expandedJobId,\r\n    setExpandedJobId,\r\n  } = useJobs();\r\n\r\n  const {\r\n    isLoading: isDocumentsLoading,\r\n    data: documentsData,\r\n    refetch: refetchDocuments,\r\n    isFetching: isDocumentsFetching,\r\n    statuses: documentStatuses,\r\n    setStatuses: setDocumentStatuses,\r\n    statusLabels: documentStatusLabels,\r\n    handleNext: handleNextDocument,\r\n    handlePrevious: handlePreviousDocument,\r\n    hasPrevious: hasPreviousDocument,\r\n  } = useDocuments(undefined, tab === \"documents\");\r\n\r\n  return (\r\n    <>\r\n      <Tabs\r\n        value={tab}\r\n        onValueChange={(value) => setTab(value as \"jobs\" | \"documents\")}\r\n      >\r\n        <div className=\"mb-5 flex w-full justify-between gap-4\">\r\n          <TabsList>\r\n            <TabsTrigger value=\"jobs\">Jobs</TabsTrigger>\r\n            <TabsTrigger value=\"documents\">Documents</TabsTrigger>\r\n          </TabsList>\r\n\r\n          <TabsContent value=\"jobs\" className=\"flex flex-none\">\r\n            <PaginatedTableHeader\r\n              statuses={jobStatuses}\r\n              setStatuses={setJobStatuses}\r\n              statusLabels={jobStatusLabels}\r\n              onRefresh={refetchJobs}\r\n              isRefreshing={isJobsFetching}\r\n            />\r\n          </TabsContent>\r\n\r\n          <TabsContent value=\"documents\" className=\"flex flex-none\">\r\n            <PaginatedTableHeader\r\n              statuses={documentStatuses}\r\n              setStatuses={setDocumentStatuses}\r\n              statusLabels={documentStatusLabels}\r\n              onRefresh={refetchDocuments}\r\n              isRefreshing={isDocumentsFetching}\r\n            />\r\n          </TabsContent>\r\n        </div>\r\n\r\n        <TabsContent value=\"jobs\">\r\n          {/* Show documents for the expanded job */}\r\n          {expandedJobId && (\r\n            <DocumentsDialog\r\n              jobId={expandedJobId}\r\n              onClose={() => setExpandedJobId(null)}\r\n            />\r\n          )}\r\n\r\n          <PaginatedTable\r\n            columns={columns}\r\n            data={jobsData}\r\n            isLoading={isJobsLoading}\r\n            meta={\r\n              {\r\n                expandedJobId,\r\n                onExpand: setExpandedJobId,\r\n              } satisfies JobsTableMeta\r\n            }\r\n            onNext={handleNextJob}\r\n            onPrevious={handlePreviousJob}\r\n            hasPrevious={hasPreviousJob}\r\n          />\r\n        </TabsContent>\r\n\r\n        <TabsContent value=\"documents\">\r\n          <Alert className=\"mb-5\">\r\n            <InfoIcon className=\"text-muted-foreground size-4\" />\r\n            <AlertDescription>\r\n              Documents may take a moment to appear while processing. Check the\r\n              jobs tab for status.\r\n            </AlertDescription>\r\n          </Alert>\r\n\r\n          <PaginatedTable\r\n            columns={documentColumns}\r\n            data={documentsData}\r\n            isLoading={isDocumentsLoading}\r\n            onNext={handleNextDocument}\r\n            onPrevious={handlePreviousDocument}\r\n            hasPrevious={hasPreviousDocument}\r\n          />\r\n        </TabsContent>\r\n      </Tabs>\r\n    </>\r\n  );\r\n}\r\n\r\nfunction DocumentsDialog({\r\n  jobId,\r\n  onClose,\r\n}: {\r\n  jobId: string;\r\n  onClose: () => void;\r\n}) {\r\n  const {\r\n    isLoading,\r\n    data,\r\n    refetch,\r\n    isFetching,\r\n    statuses,\r\n    setStatuses,\r\n    statusLabels,\r\n    handleNext,\r\n    handlePrevious,\r\n    hasPrevious,\r\n  } = useDocuments(jobId);\r\n\r\n  return (\r\n    <Dialog open onOpenChange={() => onClose()}>\r\n      <DialogContent className=\"sm:max-w-5xl\">\r\n        <DialogHeader>\r\n          <DialogTitle>Documents</DialogTitle>\r\n          <DialogDescription>\r\n            Documents for the ingest job{\" \"}\r\n            <CodeBlock inline>{prefixId(jobId, \"job_\")}</CodeBlock>\r\n          </DialogDescription>\r\n        </DialogHeader>\r\n\r\n        <div className=\"my-5 flex justify-end\">\r\n          <PaginatedTableHeader\r\n            statuses={statuses}\r\n            setStatuses={setStatuses}\r\n            statusLabels={statusLabels}\r\n            onRefresh={refetch}\r\n            isRefreshing={isFetching}\r\n          />\r\n        </div>\r\n\r\n        <PaginatedTable\r\n          isDialog\r\n          columns={documentColumns}\r\n          data={data}\r\n          isLoading={isLoading}\r\n          onNext={handleNext}\r\n          onPrevious={handlePrevious}\r\n          hasPrevious={hasPrevious}\r\n        />\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AAAA;AAeA;AACA;AACA;AACA;AACA;AACA;AA3BA;;;;;;;;;;;;;AA6Be,SAAS;IACtB,MAAM,CAAC,KAAK,OAAO,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAwB;IAErD,MAAM,EACJ,WAAW,aAAa,EACxB,MAAM,QAAQ,EACd,SAAS,WAAW,EACpB,YAAY,cAAc,EAC1B,YAAY,aAAa,EACzB,gBAAgB,iBAAiB,EACjC,aAAa,cAAc,EAC3B,UAAU,WAAW,EACrB,aAAa,cAAc,EAC3B,cAAc,eAAe,EAC7B,aAAa,EACb,gBAAgB,EACjB,GAAG,CAAA,GAAA,gOAAA,CAAA,UAAO,AAAD;IAEV,MAAM,EACJ,WAAW,kBAAkB,EAC7B,MAAM,aAAa,EACnB,SAAS,gBAAgB,EACzB,YAAY,mBAAmB,EAC/B,UAAU,gBAAgB,EAC1B,aAAa,mBAAmB,EAChC,cAAc,oBAAoB,EAClC,YAAY,kBAAkB,EAC9B,gBAAgB,sBAAsB,EACtC,aAAa,mBAAmB,EACjC,GAAG,CAAA,GAAA,qOAAA,CAAA,eAAY,AAAD,EAAE,WAAW,QAAQ;IAEpC,qBACE;kBACE,cAAA,8OAAC,4IAAA,CAAA,OAAI;YACH,OAAO;YACP,eAAe,CAAC,QAAU,OAAO;;8BAEjC,8OAAC;oBAAI,WAAU;;sCACb,8OAAC,4IAAA,CAAA,WAAQ;;8CACP,8OAAC,4IAAA,CAAA,cAAW;oCAAC,OAAM;8CAAO;;;;;;8CAC1B,8OAAC,4IAAA,CAAA,cAAW;oCAAC,OAAM;8CAAY;;;;;;;;;;;;sCAGjC,8OAAC,4IAAA,CAAA,cAAW;4BAAC,OAAM;4BAAO,WAAU;sCAClC,cAAA,8OAAC,kPAAA,CAAA,uBAAoB;gCACnB,UAAU;gCACV,aAAa;gCACb,cAAc;gCACd,WAAW;gCACX,cAAc;;;;;;;;;;;sCAIlB,8OAAC,4IAAA,CAAA,cAAW;4BAAC,OAAM;4BAAY,WAAU;sCACvC,cAAA,8OAAC,kPAAA,CAAA,uBAAoB;gCACnB,UAAU;gCACV,aAAa;gCACb,cAAc;gCACd,WAAW;gCACX,cAAc;;;;;;;;;;;;;;;;;8BAKpB,8OAAC,4IAAA,CAAA,cAAW;oBAAC,OAAM;;wBAEhB,+BACC,8OAAC;4BACC,OAAO;4BACP,SAAS,IAAM,iBAAiB;;;;;;sCAIpC,8OAAC,wOAAA,CAAA,iBAAc;4BACb,SAAS,6NAAA,CAAA,UAAO;4BAChB,MAAM;4BACN,WAAW;4BACX,MACE;gCACE;gCACA,UAAU;4BACZ;4BAEF,QAAQ;4BACR,YAAY;4BACZ,aAAa;;;;;;;;;;;;8BAIjB,8OAAC,4IAAA,CAAA,cAAW;oBAAC,OAAM;;sCACjB,8OAAC,6IAAA,CAAA,QAAK;4BAAC,WAAU;;8CACf,8OAAC,sMAAA,CAAA,WAAQ;oCAAC,WAAU;;;;;;8CACpB,8OAAC,6IAAA,CAAA,mBAAgB;8CAAC;;;;;;;;;;;;sCAMpB,8OAAC,wOAAA,CAAA,iBAAc;4BACb,SAAS,0OAAA,CAAA,kBAAe;4BACxB,MAAM;4BACN,WAAW;4BACX,QAAQ;4BACR,YAAY;4BACZ,aAAa;;;;;;;;;;;;;;;;;;;AAMzB;AAEA,SAAS,gBAAgB,EACvB,KAAK,EACL,OAAO,EAIR;IACC,MAAM,EACJ,SAAS,EACT,IAAI,EACJ,OAAO,EACP,UAAU,EACV,QAAQ,EACR,WAAW,EACX,YAAY,EACZ,UAAU,EACV,cAAc,EACd,WAAW,EACZ,GAAG,CAAA,GAAA,qOAAA,CAAA,eAAY,AAAD,EAAE;IAEjB,qBACE,8OAAC,8IAAA,CAAA,SAAM;QAAC,IAAI;QAAC,cAAc,IAAM;kBAC/B,cAAA,8OAAC,8IAAA,CAAA,gBAAa;YAAC,WAAU;;8BACvB,8OAAC,8IAAA,CAAA,eAAY;;sCACX,8OAAC,8IAAA,CAAA,cAAW;sCAAC;;;;;;sCACb,8OAAC,8IAAA,CAAA,oBAAiB;;gCAAC;gCACY;8CAC7B,8OAAC,0JAAA,CAAA,YAAS;oCAAC,MAAM;8CAAE,CAAA,GAAA,uIAAA,CAAA,WAAQ,AAAD,EAAE,OAAO;;;;;;;;;;;;;;;;;;8BAIvC,8OAAC;oBAAI,WAAU;8BACb,cAAA,8OAAC,kPAAA,CAAA,uBAAoB;wBACnB,UAAU;wBACV,aAAa;wBACb,cAAc;wBACd,WAAW;wBACX,cAAc;;;;;;;;;;;8BAIlB,8OAAC,wOAAA,CAAA,iBAAc;oBACb,QAAQ;oBACR,SAAS,0OAAA,CAAA,kBAAe;oBACxB,MAAM;oBACN,WAAW;oBACX,QAAQ;oBACR,YAAY;oBACZ,aAAa;;;;;;;;;;;;;;;;;AAKvB","debugId":null}}]
}